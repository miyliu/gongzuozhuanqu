# 社小智工作专区系统 - 产品需求文档 (PRD)

## 一、系统概述

社小智工作专区系统是一个场景化的社区工作智能辅助平台，通过专题化组织方式，整合AI助手、案例库、素材库、工作流程等功能模块，为社区工作者提供全方位的工作支持。

### 核心价值
- **场景化组织**：按工作场景分类组织功能和资源
- **智能化辅助**：AI助手提供专业指导和文案生成
- **标准化流程**：规范化工作流程和模板
- **数字化管理**：完整的工作记录和数据管理

## 二、系统架构

### 2.1 页面层级结构
```
├── index.html (系统导航首页)
├── work_area.html (PC端工作专区)
├── sj.html (小程序端工作专区)
├── 专题详情页面
│   ├── topic_detail_template_wentishangbao_houxu.html (巡查走访专题)
│   ├── topic_detail_template_huodong.html (宣传活动专题)
│   └── topic_detail_template_gongzuozongjie.html (工作总结专题)
├── 功能区页面
│   ├── gongneng.html (PC端功能区)
│   └── gongneng_mobile.html (移动端功能区)
├── 移动端专题页面
│   ├── wenti_shangbao_mobile.html (问题上报移动端)
│   ├── xuanchuan_huodong_mobile.html (宣传活动移动端)
│   └── gongzuo_zongjie_mobile.html (工作总结移动端)
├── 列表页面
│   ├── xuncha_zouzang_list.html (PC端巡查走访列表)
│   └── xuncha_zouzang_list_mobile.html (移动端巡查走访列表)
├── 后台管理页面
│   ├── topic_admin.html (专题管理)
│   └── topic_category_admin.html (专题分类管理)
└── usage_history.html (使用记录页面)
```

### 2.2 用户角色
- **社工用户**：主要使用者，进行日常工作操作
- **管理员**：系统配置和内容管理
- **社区书记**：查看本社区工作记录（集采模式）

## 三、核心功能模块

### 3.1 系统导航首页 (index.html)

#### 功能概述
系统原型导航页面，展示所有页面的入口和功能说明。

#### 主要功能
- **页面导航**：提供所有页面的快速访问入口
- **功能说明**：每个页面卡片显示功能描述和适用角色
- **角色筛选**：支持按用户角色筛选显示页面
- **响应式设计**：适配不同屏幕尺寸

#### 页面卡片信息
- 页面标题和图标
- 功能描述
- 适用角色标签（社工用户/管理员）
- 快速打开按钮

### 3.2 工作专区页面（活动专区）

#### 3.2.1 PC端工作专区 (work_area.html)

##### 功能概述
PC端工作专区主入口，展示所有专题分类和专题列表。

##### 主要功能
- **新专题展示**：显示新上线的专题，支持启用/忽略操作
- **专题分类展示**：按分类组织专题（巡查走访、宣传活动、工作总结）
- **专题管理**：用户可自定义显示/隐藏专题
- **个性化设置**：支持个人专题显示偏好设置

##### 新专题显示规则及用户控制

**1. 新老用户显示规则**
- **新用户**（首次使用社小智24小时内）：
  - 不显示任何"新专题"区域
  - 显示区域只有默认推荐的专题
  - 用户设置后刷新显示
  
- **老用户**（首次使用社小智超过24小时）：
  - 新专题上线30天内显示在新专题区域
  - 超过30天的专题不再显示在新专题区域

**2. 推荐新专题显示规则**
- **新上线定义**：专题的上线动作在30天以内的显示在新专题区域
- **自动移除**：超过30天自动从新专题区域移除

**3. 用户控制功能**
- **手动启用**：用户可以手动启用新专题提示
- **手动忽略**：用户可以忽略不感兴趣的新专题
- **批量操作**：支持一键启用全部新专题
- **个性化记忆**：系统记住用户的选择偏好

##### 专题分类
1. **巡查走访**：安全隐患、社区矫正、环境卫生等
2. **宣传活动**：文体活动、教育宣传、志愿服务等  
3. **工作总结**：各类工作总结和汇报

#### 3.2.2 小程序端工作专区 (sj.html)

##### 功能概述
移动端工作专区，针对小程序环境优化的界面和交互。

##### 主要功能
- **移动端适配**：375px宽度设计，触摸友好
- **专题卡片**：紧凑的专题展示卡片
- **快速访问**：一键进入专题详情
- **新专题管理**：与PC端相同的新专题显示逻辑

### 3.3 专题详情页面

#### 3.3.1 巡查走访专题 (topic_detail_template_wentishangbao_houxu.html)

##### 功能概述
专门用于社区安全隐患排查和问题处理的核心模块。

##### 核心功能模块

**1. 智能问题上报系统**
- **多媒体输入支持**：
  - 图片智能识别：拖拽/点击上传，自动识别问题内容和位置
  - 语音智能解析：录音/上传音频文件，自动转文字并提取关键信息
  - 文字自动整理：清理语音识别中的语气词、口癖，生成规范描述

- **智能匹配算法**：
  - 地址智能匹配：基于楼栋房间数据库，自动匹配精确地址信息
  - 居民信息匹配：根据问题描述自动关联相关居民信息

- **高级检索功能**：支持多维度条件搜索居民信息（片区、小区、地址、楼栋、房间、姓名、手机、户主状态、租户状态、证件、性别、年龄、出生年月、特征标签、12345诉求历史等）

**2. 问题上报样式规则**

**地址匹配规则**：
- **能匹配到居民**：巡查地址取居民的住址自动填入
- **匹配不到居民**：保留文本输入方式
- **可编辑性**：所有地址信息都可以再次编辑文字

**居民信息管理**：
- **匹配范围**：不限制包楼范围，覆盖整个社区村的居民信息
- **可修改内容**：匹配到居民信息后，只能修改标签和备注
- **权限限制**：不能修改居民基本信息，基本信息仍由包楼社工和领导角色管理维护

**问题上报列表功能**：
- **全量显示**：显示全部社区村人员的记录
- **筛选功能**：可切换只看本社区村本人的所有记录（本人记录仍受社区村先过滤）
- **权限控制**：确保数据安全和隐私保护

**走访记录关联**：
- **自动关联**：居民的走访记录包含时间、走访对象、走访人员、走访描述、附件
- **双向同步**：同时添加在走访记录列表里，作为走访记录显示
- **多处展示**：在居民的详情弹框里、信息轨迹里都有显示
- **独立存储**：两边独立存储，可以各自由相应的有权限用户修改

**3. 工作流程引导系统**
标准化6步工作流程：
1. **问题发现与上报** - 参与人：居民、网格员、巡查人员、志愿者；产出：现场照片、问题上报表
2. **问题登记与分类** - 参与人：社区工作人员、问题受理员；产出：问题登记台账、问题分类清单
3. **责任分派与协调** - 参与人：社区负责人、相关职能部门；产出：任务分派单、协调会议记录
4. **现场处理与执行** - 参与人：专业技术人员、施工队伍；产出：处理过程照片、处理情况记录
5. **验收评估与反馈** - 参与人：社区验收员、居民代表；产出：验收评估表、居民满意度调查
6. **案例总结与归档** - 参与人：档案管理员、信息统计员；产出：案例总结报告、完整档案资料、经验教训清单

**4. 数据管理功能**
- **草稿保存/加载**：支持本地存储，防止信息丢失
- **附件管理**：图片预览、音频播放、文件删除等
- **表单验证**：必填项检查、数据格式验证
- **智能数据库**：楼栋房间信息库、居民信息关联系统

#### 3.3.2 宣传活动专题 (topic_detail_template_huodong.html)

##### 功能概述
专门用于社区宣传活动策划、组织和总结的专题页面。

##### 主要功能
- **活动策划指导**：提供活动策划的标准流程和模板
- **宣传素材管理**：整合各类宣传素材和模板
- **活动执行跟踪**：记录活动执行过程和效果
- **经验总结分享**：活动案例库和经验分享

##### 活动专题样式规则

**1. 活动日历功能**
- **显示规则**：表格里的活动超过10个后，表格内部滚动显示
- **完整展示**：活动不到10个时，全部展示在表格中
- **滚动优化**：确保用户体验流畅，支持快速浏览

**2. 我的活动管理**
- **直接编辑**：没有单独的查看模式，点击打开就是编辑状态
- **即时保存**：支持实时保存和草稿功能
- **快速操作**：简化操作流程，提高工作效率

**3. 云文档群组关联**
- **灵活关联**：我的活动关联的云文档群组，不判断层级关系
- **无唯一性限制**：不判断唯一性约束
- **多业务支持**：不判断是否还关联过其他业务
- **独立创建**：在我的活动弹框里创建的云文档群组，创建即生效
- **解耦设计**：与活动弹框是否成功保存无关，独立管理

#### 3.3.3 工作总结专题 (topic_detail_template_gongzuozongjie.html)

##### 功能概述
专门用于各类工作总结撰写和汇报的专题页面。

##### 主要功能
- **总结模板库**：提供各类工作总结模板
- **数据自动抽取**：从系统中自动抽取相关工作数据
- **一键生成总结**：AI辅助生成工作总结内容
- **时间段选择**：支持选择不同时间段进行总结

### 3.4 功能区页面

#### 3.4.1 PC端功能区 (gongneng.html)

##### 功能概述
集成AI助手、案例库、素材库等核心功能的综合页面。

##### 主要功能模块

**1. AI助手**
- **智能对话**：支持文本输入和语音输入
- **模板选择**：可选择不同的文档模板进行AI辅助
- **预设问题**：提供常见问题的快速入口
- **专业指导**：针对社区工作提供专业建议

**AI助手关联操作规则**：

**平台管理**：
- **管理地址**：在社小智平台 https://www.shexiaozhi.com/12345/writer/UserQuestionRounds
- **应用管理**：大语言模型/应用信息，管理上架
- **分类扩展**：应用大类会增加一个"工作专区"分类
- **专用应用**：新作的专用智能体应用放在"工作专区"大类下

**应用配置**：
- **扩展值管理**：选择应用的扩展值进行配置
- **开场白设置**：管理开场白内容，显示在AI助手的开头位置
- **默认问题**：管理默认问题，显示在AI助手的默认问题对应位置

**专题关联**：
- **灵活选择**：在专题配置页面选中智能体应用
- **无限制**：不限制应用大类，可选择任意类别的应用

**素材模板选择规则**：
- **单选限制**：用户选择素材模板时，只能选择一个发送一个
- **替换机制**：不删除的情况下选择了新的模板，自动替换掉已选的模板
- **防重复**：确保每次只有一个模板处于选中状态

**2. 案例库**
- **案例展示**：丰富的社区工作案例
- **分类筛选**：按类型、时间等维度筛选
- **详情查看**：完整的案例详情和学习要点
- **下载功能**：支持案例文档下载

**3. 素材库**
- **素材管理**：各类工作素材和模板
- **格式筛选**：支持按文档格式筛选
- **预览功能**：素材预览和详情查看
- **下载统计**：记录下载次数和使用情况

**4. 使用记录**
- **操作记录**：记录用户的所有操作历史
- **时间轴展示**：按时间顺序展示使用记录
- **统计分析**：使用频率和偏好分析

#### 3.4.2 移动端功能区 (gongneng_mobile.html)

##### 功能概述
移动端优化的功能区页面，提供与PC端相同的核心功能。

##### 移动端特色功能
- **触摸优化**：针对移动端触摸操作优化
- **详情页面**：案例和素材支持点击查看详情页面
- **返回导航**：详情页面支持返回列表
- **响应式布局**：适配375px移动端宽度

##### 详情页面功能
**案例详情页面**：
- 案例标题、发布时间、浏览量等基本信息
- 案例视频展示区域（带播放占位符）
- 详细内容结构：案例描述、活动背景、活动内容、活动效果、活动亮点
- 相关资料下载功能（PDF文档）

**素材详情页面**：
- 素材基本信息：标题、下载次数、上传时间、文件格式
- 素材预览大图展示
- 素材说明文字
- 文件下载功能和文件信息
- 统计信息展示：下载次数、文件大小、文件格式

### 3.5 移动端专题页面

#### 3.5.1 问题上报移动端 (wenti_shangbao_mobile.html)

##### 功能概述
移动端问题上报页面，支持现场快速上报问题。

##### 主要功能
- **现场拍照**：支持拍照上传问题图片
- **语音录入**：支持语音描述问题
- **位置定位**：自动获取当前位置信息
- **快速提交**：简化的提交流程

#### 3.5.2 宣传活动移动端 (xuanchuan_huodong_mobile.html)

##### 功能概述
移动端宣传活动页面，支持活动现场操作。

##### 主要功能
- **活动签到**：支持活动现场签到
- **现场记录**：记录活动执行情况
- **素材分享**：快速分享活动素材
- **效果反馈**：收集活动效果反馈

#### 3.5.3 工作总结移动端 (gongzuo_zongjie_mobile.html)

##### 功能概述
移动端工作总结页面，支持随时记录工作要点。

##### 主要功能
- **要点记录**：快速记录工作要点
- **语音备忘**：语音记录工作内容
- **图片附件**：添加相关图片资料
- **同步功能**：与PC端数据同步

### 3.6 列表页面

#### 3.6.1 PC端巡查走访列表 (xuncha_zouzang_list.html)

##### 功能概述
展示巡查走访记录的列表页面，支持查看和管理。

##### 主要功能
- **记录列表**：展示所有巡查走访记录
- **筛选功能**：按时间、类型、状态等筛选
- **详情查看**：点击查看详细记录
- **导出功能**：支持数据导出

#### 3.6.2 移动端巡查走访列表 (xuncha_zouzang_list_mobile.html)

##### 功能概述
移动端巡查走访记录列表，针对移动端优化。

##### 主要功能
- **卡片展示**：紧凑的卡片式记录展示
- **快速筛选**：简化的筛选功能
- **滑动操作**：支持滑动查看更多信息
- **快速操作**：支持快速编辑和删除

### 3.7 后台管理页面

#### 3.7.1 专题管理 (topic_admin.html)

##### 功能概述
管理员专题管理页面，支持专题的增删改查。

##### 主要功能
- **专题列表**：展示所有专题信息
- **专题编辑**：支持专题信息编辑
- **状态管理**：控制专题上线/下线状态
- **排序设置**：设置专题显示顺序
- **预览功能**：预览专题页面效果

#### 3.7.2 专题分类管理 (topic_category_admin.html)

##### 功能概述
管理员专题分类管理页面，支持分类的管理和配置。

##### 主要功能
- **分类管理**：增删改查专题分类
- **分类排序**：设置分类显示顺序
- **图标设置**：设置分类图标和颜色
- **权限控制**：设置分类访问权限

### 3.8 使用记录页面 (usage_history.html)

##### 功能概述
展示用户使用记录的页面，支持查看和分析。

##### 主要功能
- **记录展示**：按时间顺序展示使用记录
- **操作分类**：按操作类型分类展示
- **统计分析**：使用频率和偏好统计
- **导出功能**：支持记录导出

## 四、技术特色

### 4.1 智能化功能
- **AI对话助手**：基于预设模板的智能对话
- **图片识别**：模拟图片内容识别和地点推荐
- **语音转文字**：语音输入自动转换为文字
- **智能匹配**：地址和居民信息自动匹配

### 4.2 用户体验设计
- **响应式布局**：适配PC端和移动端
- **触摸友好**：移动端触摸操作优化
- **模态框交互**：丰富的交互反馈
- **防误操作**：确认对话框和撤回功能

### 4.3 数据管理
- **本地存储**：草稿保存和用户设置
- **数据同步**：PC端和移动端数据同步
- **结构化数据**：楼栋房间和居民信息结构化
- **文件管理**：附件上传和管理

## 五、业务流程

### 5.1 用户使用流程
1. **进入工作专区**：从首页进入工作专区
2. **选择专题**：根据工作需要选择相应专题
3. **使用功能**：使用AI助手、查看案例、下载素材
4. **记录工作**：记录工作过程和结果
5. **查看历史**：查看使用记录和工作历史

### 5.2 管理员配置流程
1. **专题管理**：创建和配置专题
2. **内容管理**：管理案例库和素材库
3. **用户管理**：设置用户权限和角色
4. **数据分析**：查看使用统计和分析

## 六、系统优势

### 6.1 场景化设计
- **工作场景聚合**：按实际工作场景组织功能
- **专题化管理**：每个专题都有完整的功能体系
- **流程化指导**：提供标准化的工作流程指导

### 6.2 智能化辅助
- **AI助手支持**：提供专业的工作指导
- **模板化工作**：丰富的模板库支持
- **自动化处理**：减少重复性工作

### 6.3 移动化支持
- **移动端优化**：完整的移动端功能支持
- **现场作业**：支持现场快速操作
- **数据同步**：PC端和移动端数据实时同步

## 七、未来扩展

### 7.1 功能扩展
- **更多专题类型**：根据需要增加新的专题类型
- **高级AI功能**：集成更强大的AI能力
- **数据分析**：提供更深入的数据分析功能

### 7.2 技术升级
- **云端部署**：支持云端部署和访问
- **API集成**：与其他系统的API集成
- **性能优化**：持续的性能优化和改进

## 八、总结

社小智工作专区系统通过场景化的设计理念，将社区工作中的各种功能和资源有机整合，为社区工作者提供了一个高效、智能、易用的工作平台。系统不仅提升了工作效率，还通过标准化的流程和丰富的资源库，提高了工作质量和专业水平。

