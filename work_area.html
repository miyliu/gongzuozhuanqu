<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥ä½œä¸“åŒº - ç¤¾å°æ™º</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: "Microsoft YaHei", "PingFang SC", "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 0;
        }
        .top-nav {
            background-color: #fff;
            border-bottom: 1px solid #e5e7eb;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            height: 64px;
        }
        .nav-item {
            padding: 0 16px;
            color: #333;
            position: relative;
            height: 64px;
            line-height: 64px;
            font-size: 16px;
            transition: all 0.3s;
        }
        .nav-item:hover {
            color: #1890ff;
        }
        .nav-item.active {
            color: #1890ff;
            font-weight: 500;
        }
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 16px;
            right: 16px;
            height: 2px;
            background-color: #1890ff;
        }
        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
        }
        .tab-button {
            transition: all 0.3s ease;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .tab-button.active {
            border-color: #1890ff;
            color: #1890ff;
            font-weight: bold;
        }
        .topic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 16px;
        }
        .topic-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px;
            background-color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.05);
            border: 1px solid #f0f0f0;
            position: relative;
        }
        
        /* æ–°ä¸“é¢˜å¡ç‰‡ä¸­çš„æŒ‰é’®æ ·å¼ */
        .new-topic button {
            position: relative;
            z-index: 5;
        }
        .topic-icon:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1), 0 1px 3px rgba(0,0,0,0.08);
            border-color: #d0d0d0;
        }
        .topic-icon i {
            font-size: 28px;
            margin-bottom: 8px;
        }
        .topic-icon span {
            font-size: 14px;
            color: #333;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            max-width: 100%;
        }
        .logo-text {
            color: #1890ff;
            font-weight: bold;
            font-size: 20px;
        }
        .search-box {
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            padding: 0 12px;
            width: auto;
            max-width: 400px;
            min-width: 300px;
            margin-left: 15px;
            flex: none;
            background-color: #f9f9f9;
        }
        .compact-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            background-color: #fff;
            border: none;
            border-radius: 0;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* è®¾ç½®é¢æ¿ç›¸å…³æ ·å¼ */
        .settings-button {
            background-color: #fff;
            border-radius: 4px;
            padding: 6px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: all 0.3s;
            border: none;
            font-size: 14px;
            white-space: nowrap;
            flex-shrink: 0;
            color: #333;
        }
        .settings-button:hover {
            color: #1890ff;
        }
        .settings-button i {
            margin-right: 8px;
        }
        .settings-button span {
            display: inline;
        }
        .settings-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
        }
        .settings-panel {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .settings-header {
            padding: 16px 24px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .settings-body {
            padding: 24px;
            overflow-y: auto;
            max-height: calc(80vh - 130px);
        }
        .settings-footer {
            padding: 12px 24px;
            border-top: 1px solid #f0f0f0;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        .settings-category {
            margin-bottom: 24px;
        }
        .settings-category-title {
            font-weight: bold;
            margin-bottom: 12px;
            font-size: 16px;
            color: #1890ff;
            display: flex;
            align-items: center;
        }
        .settings-category-items {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }
        .settings-item {
            display: flex;
            align-items: center;
            padding: 6px 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
            position: relative;
        }
        .settings-item:hover {
            background-color: #f5f5f5;
        }
        .settings-item input[type="checkbox"] {
            margin-right: 8px;
            cursor: pointer;
        }
        .settings-item label {
            cursor: pointer;
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        /* æ¨èæ ‡è®°æ ·å¼ */
        .recommended-mark {
            display: inline-block;
            font-size: 12px;
            padding: 1px 4px;
            margin-left: 4px;
            background-color: #f56565;
            color: white;
            border-radius: 2px;
            vertical-align: middle;
        }
        
        /* æ–°ä¸“é¢˜çº¢ç‚¹æ ‡è¯†æ ·å¼ */
        .new-topic-dot {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 8px;
            height: 8px;
            background-color: #ff4d4f;
            border-radius: 50%;
            border: 1px solid white;
            z-index: 10;
        }
        
        .btn-primary {
            background-color: #1890ff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #40a9ff;
        }
        .btn-default {
            background-color: white;
            color: rgba(0, 0, 0, 0.65);
            border: 1px solid #d9d9d9;
            padding: 7px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-default:hover {
            color: #40a9ff;
            border-color: #40a9ff;
        }
        .topic-hidden {
            display: none !important;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 640px) {
            .search-box {
                max-width: 140px;
            }
            .settings-button {
                padding: 6px 8px;
            }
            .settings-button i {
                margin-right: 0;
            }
            .settings-button span {
                display: none;
            }
            .compact-header h2 {
                font-size: 1rem;
                margin-right: 8px;
            }
        }
        
        /* æ–°ä¸“é¢˜ç›¸å…³æ ·å¼ */
        .new-topic {
            position: relative;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
            cursor: default;
        }
        
        .new-topic:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 6px rgba(59, 130, 246, 0.1);
        }
        
        .new-topic .enable-topic-btn,
        .new-topic .dismiss-topic-btn {
            pointer-events: auto;
        }
        
        #newTopicsBadge .tooltip-content {
            top: 100%;
            margin-top: 5px;
            min-width: 200px;
            border: 1px solid #e5e7eb;
        }
        
        /* é€‚é…å°ç¨‹åºçš„æ ·å¼ */
        @media (max-width: 640px) {
            #newTopicsBadge .tooltip-content {
                right: -20px;
                width: 220px;
            }
            
            #newTopicsSection .topic-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
        }
        
        /* ä¸»è¦å†…å®¹åŒºåŸŸæ ·å¼ */
        .content-area {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            padding: 20px;
        }
        
        /* ä¸“é¢˜ç½‘æ ¼å®¹å™¨æ ·å¼ */
        .category-container {
            margin-bottom: 24px;
            background-color: #f9fafc;
            border-radius: 6px;
            padding: 16px;
            border: 1px solid #eaeaea;
        }
        
        /* æœ€åä¸€ä¸ªåˆ†ç±»å®¹å™¨æ— åº•éƒ¨è¾¹è· */
        .category-container:last-child {
            margin-bottom: 0;
        }
        
        /* åˆ†ç±»æ ‡é¢˜å®¹å™¨ */
        .category-header-container {
            background-color: #ffffff;
            padding: 12px 16px;
            border-radius: 6px 6px 0 0;
            border: 1px solid #eaeaea;
            border-bottom: none;
            margin: -16px -16px 16px -16px;
        }
        
        /* åˆ†ç±»æ ‡é¢˜æ ·å¼ */
        .category-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin: 0;
            position: relative;
            padding-left: 2px;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="top-nav">
        <div class="content-wrapper px-4 flex items-center justify-between h-full">
            <!-- å·¦ä¾§Logo -->
            <div class="flex items-center">
                <a href="#" class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="#1890ff">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                    </svg>
                    <div class="ml-2">
                        <div class="logo-text">ç¤¾å°æ™º</div>
                    </div>
                </a>
            </div>
            
            <!-- ä¸­é—´å¯¼èˆªèœå• -->
            <nav class="hidden md:flex">
                <a href="#" class="nav-item">é¦–é¡µ</a>
                <a href="#" class="nav-item">å·¥å•åŠç†åŠ©æ‰‹</a>
                <a href="#" class="nav-item">å…¬æ–‡æ¨¡æ¿</a>
                <a href="#" class="nav-item">æ‰¾æ‰¾äº‘æ–‡æ¡£</a>
                <a href="#" class="nav-item">å·¥å•åˆ†æåŠç†PRO</a>
                <a href="#" class="nav-item">ç¤¾æƒ…æ°‘æ„åŠ©æ‰‹</a>
                <a href="#" class="nav-item active">å·¥ä½œä¸“åŒº</a>
            </nav>
            
            <!-- å³ä¾§ç”¨æˆ·ä¿¡æ¯ -->
            <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center mr-2">
                    <img src="https://via.placeholder.com/32" alt="ç”¨æˆ·å¤´åƒ" class="rounded-full">
                </div>
                <span class="text-gray-700">åˆ˜æ¨</span>
            </div>
        </div>
    </header>

    <!-- æ›¿æ¢ç´§å‡‘çš„æœç´¢æ å’Œæ ‡é¢˜åŒºåŸŸ -->
    <div class="content-wrapper px-4">
        <div class="compact-header">
            <div class="flex items-center ml-4">
                <h2 class="text-xl font-semibold text-gray-800">å·¥ä½œä¸“åŒº</h2>
                <div class="search-box flex items-center">
                    <span class="text-gray-400 mr-2">ğŸ”</span>
                    <input type="text" placeholder="è¾“å…¥å…³é”®è¯æœç´¢ä¸“é¢˜" class="outline-none border-none py-2 w-full bg-transparent">
                    <button class="text-blue-500 hover:text-blue-700 font-medium text-sm ml-2 flex-shrink-0">æœç´¢</button>
                </div>
            </div>
            <div class="flex items-center mr-4">
                <button id="settingsButton" class="settings-button" onclick="document.getElementById('settingsModal').style.display='flex'; document.body.style.overflow='hidden';">
                    <i class="fas fa-cog mr-2"></i>
                    ä¸“é¢˜è®¾ç½®
                </button>
                <!-- å®Œå…¨ç§»é™¤æ–°ä¸“é¢˜æ•°å­—å¾½ç«  -->
                <style>
                    #newTopicsBadge {
                        display: none !important;
                    }
                </style>
                <div id="newTopicsBadge" class="ml-2 relative cursor-pointer" style="display: none;">
                    <div class="bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">3</div>
                    <div class="tooltip-content hidden absolute right-0 bg-white shadow-lg rounded p-3 z-10 w-64">
                        <div class="font-medium text-sm mb-2">å‘ç°3ä¸ªæ–°ä¸“é¢˜</div>
                        <div class="text-xs mb-1">
                            <span class="text-blue-600 hover:underline cursor-pointer">é˜²æ±›åº”æ€¥ä¸“é¢˜</span>
                            <span class="text-gray-500 text-xs">ï¼ˆç¤¾åŒºå®‰å…¨ä¸åº”æ€¥ç®¡ç†ï¼‰</span>
            </div>
                        <div class="text-xs mb-1">
                            <span class="text-blue-600 hover:underline cursor-pointer">å¿—æ„¿è€…æœåŠ¡ä¸“é¢˜</span>
                            <span class="text-gray-500 text-xs">ï¼ˆæ–‡åŒ–æ•™è‚²ä¸ç²¾ç¥æ–‡æ˜å»ºè®¾ï¼‰</span>
                        </div>
                        <div class="text-xs mb-1">
                            <span class="text-blue-600 hover:underline cursor-pointer">ç¤¾åŒºæ–‡åˆ›ä¸“é¢˜</span>
                            <span class="text-gray-500 text-xs">ï¼ˆæ–‡åŒ–æ•™è‚²ä¸ç²¾ç¥æ–‡æ˜å»ºè®¾ï¼‰</span>
                        </div>
                        <div class="mt-2 pt-2 border-t text-xs text-center">
                            <span id="addAllNewTopics" class="text-blue-600 hover:underline cursor-pointer">ä¸€é”®å¯ç”¨å…¨éƒ¨</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- è®¾ç½®é¢æ¿ -->
    <div id="settingsModal" class="settings-modal">
        <div class="settings-panel">
            <div class="settings-header">
                <h3 class="text-lg font-medium">ä¸“é¢˜æ˜¾ç¤ºè®¾ç½®</h3>
                <button id="closeSettings" class="text-gray-500 hover:text-gray-700" onclick="document.getElementById('settingsModal').style.display='none'; document.body.style.overflow='';">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="settings-body">
                <div id="settingsActionContent">
                    <!-- ä¸“é¢˜è®¾ç½®å†…å®¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            <div class="settings-footer">
                <button id="resetSettings" class="btn-default" onclick="resetUserSettings()">
                    æ¢å¤é»˜è®¤
                </button>
                <button id="applySettings" class="btn-primary" onclick="applyUserSettings()">
                    åº”ç”¨è®¾ç½®
                </button>
            </div>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒº -->
    <main class="content-wrapper px-4 mt-6 mb-8">
        <!-- åˆ†ç±»æ ‡é¢˜å·²ç§»é™¤ -->

        <!-- æ–°ä¸“é¢˜ä¸“åŒº -->
        <div id="newTopicsSection" class="content-area mb-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium flex items-center">
                    <span class="bg-red-500 text-white text-xs px-2 py-0.5 rounded mr-2">æ–°</span>
                    æ–°ä¸Šçº¿ä¸“é¢˜
                </h3>
                <div class="text-sm text-blue-600 hover:underline cursor-pointer" id="addAllNewTopicsBtn">ä¸€é”®å¯ç”¨å…¨éƒ¨</div>
            </div>
            <div class="topic-grid">
                <!-- æ–°ä¸“é¢˜é¡¹ -->
                <div class="topic-icon new-topic">
                    <div class="absolute top-1 right-1 bg-red-500 w-2 h-2 rounded-full"></div>
                    <i class="fas fa-umbrella text-blue-500"></i>
                    <span>é˜²æ±›åº”æ€¥ä¸“é¢˜</span>
                    <div class="text-xs text-gray-500 mt-1">åˆ†ç±»ï¼šå·¡æŸ¥èµ°è®¿</div>
                    <div class="flex space-x-1 mt-2">
                        <button class="enable-topic-btn flex-1 text-xs bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded" data-id="101">å¯ç”¨</button>
                        <button class="dismiss-topic-btn flex-1 text-xs bg-gray-300 hover:bg-gray-400 text-gray-700 px-2 py-1 rounded" data-id="101">æš‚ä¸å¯ç”¨</button>
                    </div>
                </div>
                <div class="topic-icon new-topic">
                    <div class="absolute top-1 right-1 bg-red-500 w-2 h-2 rounded-full"></div>
                    <i class="fas fa-hands-helping text-green-500"></i>
                    <span>å¿—æ„¿è€…æœåŠ¡ä¸“é¢˜</span>
                    <div class="text-xs text-gray-500 mt-1">åˆ†ç±»ï¼šæ´»åŠ¨ç»„ç»‡</div>
                    <div class="flex space-x-1 mt-2">
                        <button class="enable-topic-btn flex-1 text-xs bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded" data-id="102">å¯ç”¨</button>
                        <button class="dismiss-topic-btn flex-1 text-xs bg-gray-300 hover:bg-gray-400 text-gray-700 px-2 py-1 rounded" data-id="102">æš‚ä¸å¯ç”¨</button>
                    </div>
                </div>
                <div class="topic-icon new-topic">
                    <div class="absolute top-1 right-1 bg-red-500 w-2 h-2 rounded-full"></div>
                    <i class="fas fa-paint-brush text-purple-500"></i>
                    <span>ç¤¾åŒºæ–‡åˆ›ä¸“é¢˜</span>
                    <div class="text-xs text-gray-500 mt-1">åˆ†ç±»ï¼šå®£ä¼ æ•™è‚²</div>
                    <div class="flex space-x-1 mt-2">
                        <button class="enable-topic-btn flex-1 text-xs bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded" data-id="103">å¯ç”¨</button>
                        <button class="dismiss-topic-btn flex-1 text-xs bg-gray-300 hover:bg-gray-400 text-gray-700 px-2 py-1 rounded" data-id="103">æš‚ä¸å¯ç”¨</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸“é¢˜å±•ç¤ºåŒº -->
        <div id="topicDisplayArea" class="content-area">
            <!-- ä¸“é¢˜å†…å®¹å°†é€šè¿‡JSåŠ¨æ€æ’å…¥ -->
        </div>
    </main>

    <script>
        const actionCategories = [
            {
                name: "å·¡æŸ¥èµ°è®¿",
                icon: "fas fa-bullhorn",
                color: "text-red-500",
                topics: [
                    "ææ€–è¡Œä¸ºæŠ¥å‘Š", "é—´è°è¡Œä¸ºæŠ¥å‘Š", "ç¦æ¯’è¡Œä¸ºæŠ¥å‘Š", "éæ³•é›†èµ„æŠ¥å‘Š", "è¿æ³•è¡Œä¸ºæŠ¥å‘Š", "ç¤¾åŒºçŸ«æ­£ååŠ©", "å®‰ç½®å¸®æ•™ååŠ©", "å®‰å…¨éšæ‚£æŠ¥å‘Š", "ç¾å®³åº”æ€¥å“åº”", "é˜²æ±›åº”æ€¥ä¸“é¢˜", "æ•™è‚²è¯‰æ±‚åé¦ˆ", "å°±ä¸šå›°éš¾åé¦ˆ", "å…»è€æœåŠ¡åé¦ˆ", "åŒ»ç–—ä¿éšœåé¦ˆ", "æ…ˆå–„æ•‘åŠ©åé¦ˆ", "æ®‹ç–¾äººä¿éšœåé¦ˆ", "å›°å¢ƒå„¿ç«¥åé¦ˆ", "å®¶æš´è¡Œä¸ºæŠ¥å‘Š", "å†›å±å›°éš¾åé¦ˆ", "é€€å½¹å†›äººåé¦ˆ", "è‰¾æ»‹ç—…é˜²æ²»åé¦ˆ", "ç²¾ç¥å«ç”Ÿåé¦ˆ", "ä¼ æŸ“ç—…é˜²æ§åé¦ˆ", "åŠ¨ç‰©é˜²ç–«åé¦ˆ", "é£Ÿå“å®‰å…¨åé¦ˆ", "æ–‡æ˜è¡Œä¸ºç›‘ç£", "å­¦å‰æ•™è‚²åé¦ˆ", "é€‚é¾„å…¥å­¦åé¦ˆ", "ç¤¾ä¼šå®è·µåé¦ˆ", "å®¶åº­æ•™è‚²åé¦ˆ", "ç”Ÿæ´»åƒåœ¾åˆ†ç±»è¿è§„", "åƒåœ¾åˆ†ç±»ç£å¯¼", "é—¨å‰ä¸‰åŒ…è¿è§„", "å…»çŠ¬è¿è§„è¡Œä¸º", "èŠ‚æ°´è¿è§„è¡Œä¸º", "è¿å»ºè¡Œä¸ºæŠ¥å‘Š", "æ’æ±¡è¡Œä¸ºæŠ¥å‘Š", "ç ´åç”Ÿæ€è¡Œä¸º", "å™ªå£°æ±¡æŸ“æŠ¥å‘Š", "æŸç»¿æ¯ç»¿è¡Œä¸º", "ç§Ÿèµçº çº·åé¦ˆ", "å±…æ°‘è¯‰æ±‚åé¦ˆ", "æ™ºæ…§åœè½¦ç®¡ç†", "ç»æµæ™®æŸ¥åé¦ˆ", "æ±¡æŸ“æºæ™®æŸ¥åé¦ˆ", "äººå£æ™®æŸ¥åé¦ˆ", "å®—æ•™è¿æ³•æŠ¥å‘Š"
                ]
            },
            {
                name: "å·¥ä½œæ€»ç»“",
                icon: "fas fa-file-alt",
                color: "text-blue-500",
                topics: [
                    "æ²»å®‰ä»»åŠ¡æ€»ç»“", "æ•™è‚²æ”¿ç­–æ€»ç»“", "å°±ä¸šå¸®æ‰¶æ€»ç»“", "å…»è€æœåŠ¡æ€»ç»“", "åŒ»ç–—ä¿éšœæ€»ç»“", "æ…ˆå–„é¡¹ç›®æ€»ç»“", "æ®‹ç–¾äººæœåŠ¡æ€»ç»“", "å›°å¢ƒå„¿ç«¥æœåŠ¡æ€»ç»“", "å®¶æš´å¹²é¢„æ€»ç»“", "å†›å±æœåŠ¡æ€»ç»“", "é€€å½¹å†›äººæœåŠ¡æ€»ç»“", "è‰¾æ»‹é˜²æ§æ€»ç»“", "ç²¾ç¥å«ç”Ÿæ€»ç»“", "ä¼ æŸ“ç—…é˜²æ§æ€»ç»“", "åŠ¨ç‰©é˜²ç–«æ€»ç»“", "é£Ÿå“å®‰å…¨æ€»ç»“", "æ–‡åŒ–æ´»åŠ¨æ€»ç»“", "å­¦å‰æ•™è‚²æ€»ç»“", "å®¶æ•™æŒ‡å¯¼æ€»ç»“", "ç¯å¢ƒæ•´æ²»æ€»ç»“", "ç‰©ä¸šç›‘ç®¡æ€»ç»“", "äººå£æ™®æŸ¥æ€»ç»“", "ç»æµæ™®æŸ¥æ€»ç»“", "å®—æ•™äº‹åŠ¡æ€»ç»“"
                ]
            },
            {
                name: "æ´»åŠ¨ç»„ç»‡",
                icon: "fas fa-calendar-alt",
                color: "text-green-500",
                topics: [
                    "æ²»å®‰å®£ä¼ æ´»åŠ¨", "æ³•å¾‹å®£ä¼ æ´»åŠ¨", "ç¤¾åŒºæ–‡ä½“æ´»åŠ¨", "å¿—æ„¿æœåŠ¡æ´»åŠ¨", "å¿—æ„¿è€…æœåŠ¡ä¸“é¢˜", "æ•™è‚²å®£ä¼ æ´»åŠ¨", "å°±ä¸šå¸®æ‰¶æ´»åŠ¨", "å…»è€æœåŠ¡æ´»åŠ¨", "åŒ»ç–—ä¹‰è¯Šæ´»åŠ¨", "æ…ˆå–„å…¬ç›Šæ´»åŠ¨", "æ®‹ç–¾äººå…³æ€€æ´»åŠ¨", "å›°å¢ƒå„¿ç«¥å…³çˆ±æ´»åŠ¨", "å®¶æš´é¢„é˜²è®²åº§", "å†›å±æ…°é—®æ´»åŠ¨", "é€€å½¹å†›äººåº§è°ˆ", "è‰¾æ»‹ç—…å®£ä¼ æ—¥", "ç²¾ç¥å¥åº·è®²åº§", "ä¼ æŸ“ç—…é˜²æ§æ¼”ç»ƒ", "åŠ¨ç‰©é˜²ç–«å®£ä¼ ", "é£Ÿå“å®‰å…¨åŸ¹è®­", "çˆ±å›½å«ç”Ÿè¿åŠ¨", "æ–‡åŒ–èŠ‚åº†æ´»åŠ¨", "å†å²ååŸå®£ä¼ ", "å­¦å‰æ•™è‚²å¼€æ”¾æ—¥", "å®¶é•¿è¯¾å ‚æ´»åŠ¨", "ç¯å¢ƒæ•´æ²»å¿—æ„¿è¡Œ", "ä¸šä¸»å§”å‘˜ä¼šæˆç«‹å¤§ä¼š", "ç¤¾åŒºè®®äº‹åå•†ä¼š", "é˜²ç¾å‡ç¾æ¼”ç»ƒ", "çº çº·è°ƒè§£æ´»åŠ¨", "æ³•å¾‹å’¨è¯¢æ´»åŠ¨", "çŒ®è¡€åŠ¨å‘˜æ´»åŠ¨", "ä¹‰åŠ¡æ¤æ ‘æ´»åŠ¨"
                ]
            },
            {
                name: "å®£ä¼ æ•™è‚²",
                icon: "fas fa-bullhorn",
                color: "text-yellow-500",
                topics: [
                    "æ²»å®‰æ”¿ç­–å®£ä¼ ", "ç¤¾åŒºçŸ«æ­£å®£ä¼ ", "å®‰å…¨é˜²èŒƒå®£ä¼ ", "ç¾å®³åº”æ€¥å®£ä¼ ", "æ•™è‚²æ”¿ç­–å®£ä¼ ", "å°±ä¸šæ”¿ç­–å®£ä¼ ", "å…»è€æ”¿ç­–å®£ä¼ ", "åŒ»ç–—æ”¿ç­–å®£ä¼ ", "æ…ˆå–„æ”¿ç­–å®£ä¼ ", "æ®‹ç–¾äººæ”¿ç­–å®£ä¼ ", "å›°å¢ƒå„¿ç«¥æ”¿ç­–å®£ä¼ ", "å®¶æš´æ³•å¾‹å®£ä¼ ", "å†›å±æ”¿ç­–å®£ä¼ ", "é€€å½¹å†›äººæ”¿ç­–å®£ä¼ ", "è‰¾æ»‹ç—…é˜²æ²»å®£ä¼ ", "ç²¾ç¥å«ç”Ÿå®£ä¼ ", "ä¼ æŸ“ç—…é˜²æ§å®£ä¼ ", "åŠ¨ç‰©é˜²ç–«å®£ä¼ ", "é£Ÿå“å®‰å…¨å®£ä¼ ", "æ–‡æ˜è¡Œä¸ºå®£ä¼ ", "å­¦å‰æ•™è‚²å®£ä¼ ", "å®¶åº­æ•™è‚²å®£ä¼ ", "åƒåœ¾åˆ†ç±»å®£ä¼ ", "é—¨å‰ä¸‰åŒ…å®£ä¼ ", "å…»çŠ¬ç®¡ç†å®£ä¼ ", "èŠ‚èƒ½èŠ‚æ°´å®£ä¼ ", "ç¯å¢ƒä¿æŠ¤å®£ä¼ ", "ç¤¾åŒºæ–‡åˆ›ä¸“é¢˜", "å®—æ•™æ”¿ç­–å®£ä¼ "
                ]
            },
            {
                name: "å·¡æŸ¥èµ°è®¿",
                icon: "fas fa-walking",
                color: "text-purple-500",
                topics: [
                    "æ²»å®‰å·¡é€»æ£€æŸ¥", "å®‰å…¨éšæ‚£å·¡æŸ¥", "ç¤¾åŒºçŸ«æ­£èµ°è®¿", "å®‰ç½®å¸®æ•™èµ°è®¿", "æ•™è‚²å¸®æ‰¶èµ°è®¿", "å°±ä¸šå›°éš¾èµ°è®¿", "å…»è€æœåŠ¡èµ°è®¿", "åŒ»ç–—ä¿éšœèµ°è®¿", "æ…ˆå–„æ•‘åŠ©èµ°è®¿", "æ®‹ç–¾äººèµ°è®¿", "å›°å¢ƒå„¿ç«¥èµ°è®¿", "å®¶æš´é«˜é£é™©èµ°è®¿", "å†›å±èµ°è®¿æ…°é—®", "é€€å½¹å†›äººèµ°è®¿", "è‰¾æ»‹ç—…é‡ç‚¹äººç¾¤èµ°è®¿", "ç²¾ç¥éšœç¢æ‚£è€…èµ°è®¿", "ä¼ æŸ“ç—…æ˜“æ„Ÿäººç¾¤èµ°è®¿", "åŠ¨ç‰©é˜²ç–«å·¡æŸ¥", "é£Ÿå“å®‰å…¨å·¡æŸ¥", "æ–‡æ˜è¡Œä¸ºå·¡æŸ¥", "å­¦å‰æ•™è‚²å·¡æŸ¥", "é€‚é¾„å„¿ç«¥å…¥å­¦å·¡æŸ¥", "å®¶åº­æ•™è‚²èµ°è®¿", "ç¯å¢ƒå«ç”Ÿå·¡æŸ¥", "åƒåœ¾åˆ†ç±»å·¡æŸ¥", "é—¨å‰ä¸‰åŒ…å·¡æŸ¥", "å…»çŠ¬ç®¡ç†å·¡æŸ¥", "èŠ‚æ°´èŠ‚èƒ½å·¡æŸ¥", "è¿å»ºè¿æ’å·¡æŸ¥", "ç»¿åŒ–æŸæ¯å·¡æŸ¥", "å™ªéŸ³æ‰°æ°‘å·¡æŸ¥", "ç§Ÿèµç§©åºå·¡æŸ¥", "å±…æ°‘è¯‰æ±‚èµ°è®¿", "å®—æ•™åœºæ‰€å·¡æŸ¥"
                ]
            }
        ];

        // å·²ç§»é™¤ä¸šåŠ¡åˆ†ç±»

        // æ¨èçš„ä¸“é¢˜åˆ—è¡¨
        const recommendedTopics = [
            // å·¡æŸ¥èµ°è®¿ç±»
            "å®‰å…¨éšæ‚£æŠ¥å‘Š", "é£Ÿå“å®‰å…¨åé¦ˆ", 
            
            // å·¥ä½œæ€»ç»“ç±»
            "æ²»å®‰ä»»åŠ¡æ€»ç»“", "ç¯å¢ƒæ•´æ²»æ€»ç»“",
            
            // æ´»åŠ¨ç»„ç»‡ç±»
            "ç¤¾åŒºæ–‡ä½“æ´»åŠ¨", "å¿—æ„¿è€…æœåŠ¡æ´»åŠ¨",
            
            // å®£ä¼ æ•™è‚²ç±»
            "å®‰å…¨é˜²èŒƒå®£ä¼ ", "ç¯å¢ƒä¿æŠ¤å®£ä¼ ",
            
            // å·¡æŸ¥èµ°è®¿ç±»
            "æ²»å®‰å·¡é€»æ£€æŸ¥", "ç¯å¢ƒå«ç”Ÿå·¡æŸ¥"
        ];

        // æ–°ä¸Šçº¿ä¸“é¢˜åˆ—è¡¨ï¼ˆæ¨¡æ‹Ÿåå°æ•°æ®ï¼Œå®é™…åº”ä»APIè·å–ï¼‰
        const newOnlineTopics = [
            "é˜²æ±›åº”æ€¥ä¸“é¢˜",
            "å¿—æ„¿è€…æœåŠ¡ä¸“é¢˜", 
            "ç¤¾åŒºæ–‡åˆ›ä¸“é¢˜",
            "æ™ºæ…§åœè½¦ç®¡ç†",
            "åƒåœ¾åˆ†ç±»ç£å¯¼"
        ];

        // æ£€æŸ¥æ˜¯å¦ä¸ºæ–°ä¸Šçº¿ä¸“é¢˜
        function isNewOnlineTopic(topicName) {
            return newOnlineTopics.includes(topicName);
        }

        // è·å–ä¸“é¢˜å›¾æ ‡å‡½æ•°
        function getTopicIcon(topicName) {
            // æ ¹æ®ä¸“é¢˜åç§°ä¸­çš„å…³é”®è¯ç¡®å®šåˆé€‚çš„å›¾æ ‡
            // ä¸ºç‰¹å®šä¸“é¢˜æä¾›ç²¾ç¡®åŒ¹é…
            if (topicName === "å®‰å…¨é˜²èŒƒå®£ä¼ ") return 'fa-shield-alt';
            if (topicName === "ç¯å¢ƒä¿æŠ¤å®£ä¼ ") return 'fa-leaf';
            
            // ä¸€èˆ¬æ€§åŒ¹é…è§„åˆ™
            if (topicName.includes('ææ€–') || topicName.includes('é—´è°')) return 'fa-skull';
            if (topicName.includes('ç¦æ¯’')) return 'fa-pills';
            if (topicName.includes('éæ³•é›†èµ„')) return 'fa-money-bill';
            if (topicName.includes('è¿æ³•')) return 'fa-gavel';
            if (topicName.includes('çŸ«æ­£') || topicName.includes('å¸®æ•™')) return 'fa-user-shield';
            if (topicName.includes('å®‰å…¨éšæ‚£')) return 'fa-exclamation-triangle';
            if (topicName.includes('ç¾å®³') || topicName.includes('é˜²ç¾')) return 'fa-cloud-showers-heavy';
            if (topicName.includes('æ•™è‚²') || topicName.includes('å­¦å‰')) return 'fa-school';
            if (topicName.includes('å°±ä¸š') || topicName.includes('å¸®æ‰¶')) return 'fa-briefcase';
            if (topicName.includes('å…»è€')) return 'fa-user-nurse';
            if (topicName.includes('åŒ»ç–—') || topicName.includes('ä¹‰è¯Š')) return 'fa-stethoscope';
            if (topicName.includes('æ…ˆå–„') || topicName.includes('æ•‘åŠ©')) return 'fa-hand-holding-heart';
            if (topicName.includes('æ®‹ç–¾äºº')) return 'fa-wheelchair';
            if (topicName.includes('å„¿ç«¥')) return 'fa-child';
            if (topicName.includes('å®¶æš´')) return 'fa-house-damage';
            if (topicName.includes('å†›å±') || topicName.includes('é€€å½¹å†›äºº')) return 'fa-medal';
            if (topicName.includes('è‰¾æ»‹')) return 'fa-ribbon';
            if (topicName.includes('ç²¾ç¥') || topicName.includes('å¿ƒç†')) return 'fa-brain';
            if (topicName.includes('ä¼ æŸ“ç—…')) return 'fa-virus';
            if (topicName.includes('åŠ¨ç‰©') || topicName.includes('é˜²ç–«')) return 'fa-paw';
            if (topicName.includes('é£Ÿå“å®‰å…¨')) return 'fa-utensils';
            if (topicName.includes('æ–‡æ˜')) return 'fa-award';
            if (topicName.includes('å®è·µ')) return 'fa-hands-helping';
            if (topicName.includes('å®¶åº­æ•™è‚²')) return 'fa-home';
            if (topicName.includes('åƒåœ¾') || topicName.includes('é—¨å‰ä¸‰åŒ…')) return 'fa-trash';
            if (topicName.includes('å…»çŠ¬')) return 'fa-dog';
            if (topicName.includes('èŠ‚æ°´') || topicName.includes('èŠ‚èƒ½')) return 'fa-tint';
            if (topicName.includes('è¿å»º') || topicName.includes('æ’æ±¡')) return 'fa-building';
            if (topicName.includes('ç”Ÿæ€') || topicName.includes('ç»¿')) return 'fa-leaf';
            if (topicName.includes('å™ªå£°')) return 'fa-volume-up';
            if (topicName.includes('ç§Ÿèµ') || topicName.includes('ç‰©ä¸š')) return 'fa-key';
            if (topicName.includes('è¯‰æ±‚')) return 'fa-comments';
            if (topicName.includes('æ™®æŸ¥')) return 'fa-clipboard-list';
            if (topicName.includes('å®—æ•™')) return 'fa-place-of-worship';
            if (topicName.includes('æ€»ç»“')) return 'fa-chart-bar';
            if (topicName.includes('å®£ä¼ ') || topicName.includes('æ³•å¾‹')) return 'fa-megaphone';
            if (topicName.includes('ç¤¾åŒºæ–‡ä½“')) return 'fa-volleyball-ball';
            if (topicName.includes('å¿—æ„¿')) return 'fa-hands';
            if (topicName.includes('è®²åº§')) return 'fa-chalkboard-teacher';
            if (topicName.includes('æ¼”ç»ƒ')) return 'fa-people-carry';
            if (topicName.includes('åŸ¹è®­')) return 'fa-user-graduate';
            if (topicName.includes('å«ç”Ÿ')) return 'fa-broom';
            if (topicName.includes('æ–‡åŒ–') || topicName.includes('èŠ‚åº†')) return 'fa-music';
            if (topicName.includes('å†å²')) return 'fa-monument';
            if (topicName.includes('å¼€æ”¾æ—¥')) return 'fa-door-open';
            if (topicName.includes('è¯¾å ‚')) return 'fa-book-reader';
            if (topicName.includes('ç¯å¢ƒ')) return 'fa-tree';
            if (topicName.includes('å§”å‘˜ä¼š')) return 'fa-users-cog';
            if (topicName.includes('åå•†') || topicName.includes('è®®äº‹')) return 'fa-comments';
            if (topicName.includes('çº çº·') || topicName.includes('è°ƒè§£')) return 'fa-balance-scale';
            if (topicName.includes('å’¨è¯¢')) return 'fa-question-circle';
            if (topicName.includes('çŒ®è¡€')) return 'fa-tint';
            if (topicName.includes('æ¤æ ‘')) return 'fa-seedling';
            if (topicName.includes('æ”¿ç­–')) return 'fa-scroll';
            if (topicName.includes('å·¡æŸ¥') || topicName.includes('å·¡é€»') || topicName.includes('èµ°è®¿')) return 'fa-route';
            
            // é¢å¤–è¡¥å……çš„å›¾æ ‡åŒ¹é…è§„åˆ™
            if (topicName.includes('åº§è°ˆ')) return 'fa-users';
            if (topicName.includes('å…³æ€€') || topicName.includes('å…³çˆ±')) return 'fa-heart';
            if (topicName.includes('çˆ±å›½')) return 'fa-flag';
            if (topicName.includes('é€‚é¾„å…¥å­¦')) return 'fa-user-graduate';
            if (topicName.includes('å®¶æ•™')) return 'fa-chalkboard-teacher';
            if (topicName.includes('æŸç»¿') || topicName.includes('æ¯ç»¿')) return 'fa-cut';
            if (topicName.includes('æ±¡æŸ“æº')) return 'fa-smog';
            if (topicName.includes('æ…°é—®')) return 'fa-gift';
            if (topicName.includes('åº”æ€¥')) return 'fa-first-aid';
            if (topicName.includes('å±…æ°‘')) return 'fa-home';
            if (topicName.includes('é‡ç‚¹äººç¾¤')) return 'fa-user-friends';
            if (topicName.includes('æ˜“æ„Ÿäººç¾¤')) return 'fa-user-shield';
            if (topicName.includes('ä¹‰åŠ¡')) return 'fa-handshake';
            if (topicName.includes('æ‰°æ°‘')) return 'fa-dizzy';
            
            // é»˜è®¤å›¾æ ‡
            return 'fa-file-alt';
        }
        
        // è·å–ä¸“é¢˜å›¾æ ‡é¢œè‰²
        function getTopicColor(topicName, categoryColor) {
            // ä½¿ç”¨åˆ†ç±»é¢œè‰²ï¼Œä½†ä¹Ÿå¯ä»¥æ ¹æ®ä¸“é¢˜åç§°ç»†åŒ–
            return categoryColor;
        }

        const topicDisplayArea = document.getElementById('topicDisplayArea');
        const tabAction = document.getElementById('tabAction');
        const tabBusiness = document.getElementById('tabBusiness');

        // ä¿å­˜ç”¨æˆ·è®¾ç½®åˆ°æœ¬åœ°å­˜å‚¨
        function saveUserSettings(type, settings) {
            localStorage.setItem(`topicSettings_${type}`, JSON.stringify(settings));
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç”¨æˆ·è®¾ç½®
        function loadUserSettings(type) {
            const settings = localStorage.getItem(`topicSettings_${type}`);
            // è®¾ç½®ä¸å­˜åœ¨çš„è¯ï¼Œç«‹å³åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„è®¾ç½®
            if (!settings) {
                if (type === 'action') {
                    // åˆå§‹åŒ–åŠ¨ä½œåˆ†ç±»è®¾ç½®ï¼Œåªæ˜¾ç¤ºæ¨èçš„ä¸“é¢˜
                    const defaultSettings = {};
                    actionCategories.forEach(category => {
                        category.topics.forEach(topic => {
                            // åªæœ‰åœ¨æ¨èåˆ—è¡¨ä¸­çš„ä¸“é¢˜é»˜è®¤æ˜¾ç¤ºï¼Œå…¶ä»–ä¸“é¢˜é»˜è®¤ä¸æ˜¾ç¤º
                            defaultSettings[topic] = recommendedTopics.includes(topic);
                        });
                    });
                    saveUserSettings(type, defaultSettings);
                    return defaultSettings;
                } else if (type === 'business') {
                    // åˆå§‹åŒ–ä¸šåŠ¡åˆ†ç±»è®¾ç½®ï¼Œåªæ˜¾ç¤ºæ¨èçš„ä¸“é¢˜
                    const defaultSettings = {};
                    businessCategories.forEach(category => {
                        category.topics.forEach(topic => {
                            // åªæœ‰åœ¨æ¨èåˆ—è¡¨ä¸­çš„ä¸“é¢˜é»˜è®¤æ˜¾ç¤ºï¼Œå…¶ä»–ä¸“é¢˜é»˜è®¤ä¸æ˜¾ç¤º
                            defaultSettings[topic] = recommendedTopics.includes(topic);
                        });
                    });
                    saveUserSettings(type, defaultSettings);
                    return defaultSettings;
                }
            }
            return settings ? JSON.parse(settings) : null;
        }

        // åˆå§‹åŒ–ç”¨æˆ·è®¾ç½®
        function initializeUserSettings() {
            // åŠ è½½è®¾ç½®ï¼ŒloadUserSettingså†…éƒ¨ä¼šè‡ªåŠ¨åˆå§‹åŒ–è®¾ç½®
            const userSettings = loadUserSettings('action');
            console.log('å·²åŠ è½½ä¸“é¢˜è®¾ç½®:', userSettings);
            
            // ç¡®ä¿æ‰€æœ‰ä¸“é¢˜éƒ½æœ‰è®¾ç½®å€¼ï¼ˆåªæœ‰æ¨èä¸“é¢˜é»˜è®¤æ˜¾ç¤ºï¼‰
            actionCategories.forEach(category => {
                category.topics.forEach(topic => {
                    if (userSettings && userSettings[topic] === undefined) {
                        // åªæœ‰åœ¨æ¨èåˆ—è¡¨ä¸­çš„ä¸“é¢˜é»˜è®¤æ˜¾ç¤ºï¼Œå…¶ä»–ä¸“é¢˜é»˜è®¤ä¸æ˜¾ç¤º
                        userSettings[topic] = recommendedTopics.includes(topic);
                    }
                });
            });
            
            // ä¿å­˜ç¡®ä¿å®Œæ•´æ€§çš„è®¾ç½®
            if (userSettings) saveUserSettings('action', userSettings);
        }

        // æ ¹æ®ç”¨æˆ·è®¾ç½®æ¸²æŸ“ä¸“é¢˜
        function renderTopics(categories) {
            const userSettings = loadUserSettings('action');

            // è°ƒè¯•æ—¥å¿—
            console.log(`æ­£åœ¨æ¸²æŸ“ä¸“é¢˜ï¼Œè®¾ç½®çŠ¶æ€:`, userSettings);

            topicDisplayArea.innerHTML = ''; // æ¸…ç©ºä¹‹å‰çš„å†…å®¹
            
            // éå†æ‰€æœ‰åˆ†ç±»
            categories.forEach(category => {
                // æ£€æŸ¥å½“å‰åˆ†ç±»æ˜¯å¦æœ‰æ¨èæ˜¾ç¤ºçš„ä¸“é¢˜
                const hasVisibleTopics = category.topics.some(topic => 
                    userSettings[topic] || 
                    (userSettings[topic] === undefined && recommendedTopics.includes(topic))
                );
                
                // åªæœ‰å½“åˆ†ç±»ä¸­æœ‰å¯è§ä¸“é¢˜æ—¶æ‰æ˜¾ç¤ºè¯¥åˆ†ç±»
                if (hasVisibleTopics) {
                    // åˆ›å»ºåˆ†ç±»å®¹å™¨
                    const categoryContainer = document.createElement('div');
                    categoryContainer.className = 'category-container';
                    
                    // åˆ›å»ºåˆ†ç±»æ ‡é¢˜
                    const categoryHeader = document.createElement('div');
                    categoryHeader.className = 'category-header-container';
                    categoryHeader.innerHTML = `
                        <h3 class="category-title">
                            <i class="fas fa-folder mr-2 text-gray-600"></i>${category.name}
                        </h3>
                    `;
                    categoryContainer.appendChild(categoryHeader);
                    
                    // åˆ›å»ºåŒ…å«ä¸“é¢˜çš„ç½‘æ ¼
                    const topicsGrid = document.createElement('div');
                    topicsGrid.className = 'topic-grid';
                    
                    let visibleTopicsCount = 0;
                    
                    // æ·»åŠ ç¬¦åˆæ¡ä»¶çš„ä¸“é¢˜
                    category.topics.forEach(topicName => {
                        // æ£€æŸ¥ç”¨æˆ·è®¾ç½®å†³å®šæ˜¯å¦æ˜¾ç¤ºè¯¥ä¸“é¢˜
                        const isVisible = userSettings[topicName] || 
                            (userSettings[topicName] === undefined && recommendedTopics.includes(topicName));
                        
                        if (isVisible) {
                            const topicIcon = document.createElement('a');
                            topicIcon.href = `topic_detail_template.html?topic=${encodeURIComponent(topicName)}`;
                            topicIcon.className = 'topic-icon';
                            
                            const icon = getTopicIcon(topicName);
                            const color = getTopicColor(topicName, category.color);
                            
                            topicIcon.innerHTML = `
                                <i class="fas ${icon} ${color}"></i>
                                <span>${topicName}</span>
                            `;
                            
                            topicsGrid.appendChild(topicIcon);
                            visibleTopicsCount++;
                        }
                    });
                    
                    if (visibleTopicsCount > 0) {
                        console.log(`${category.name}åˆ†ç±»ä¸‹æœ‰${visibleTopicsCount}ä¸ªå¯è§ä¸“é¢˜`);
                        categoryContainer.appendChild(topicsGrid);
                        topicDisplayArea.appendChild(categoryContainer);
                    }
                }
            });
        }

        // ç”Ÿæˆè®¾ç½®é¢æ¿å†…å®¹
        function generateSettingsContent(categories, containerId) {
            const container = document.getElementById(containerId);
            const settingsType = 'action';
            const userSettings = loadUserSettings(settingsType);
            
            container.innerHTML = '';
            
            // æ·»åŠ å…¨é€‰/å…¨ä¸é€‰æ§ä»¶
            const selectAllContainer = document.createElement('div');
            selectAllContainer.className = 'mb-4 pb-2 border-b border-gray-200';
            selectAllContainer.innerHTML = `
                <div class="flex justify-between items-center">
                    <div class="settings-item">
                        <input type="checkbox" id="selectAll_${settingsType}" ${areAllSelected(userSettings) ? 'checked' : ''}>
                        <label for="selectAll_${settingsType}">å…¨é€‰/å–æ¶ˆå…¨é€‰</label>
                    </div>
                    <span class="text-sm text-gray-500">å·²é€‰ ${countSelectedTopics(userSettings)} ä¸ªä¸“é¢˜</span>
                </div>
            `;
            container.appendChild(selectAllContainer);
            
            // ä¸ºæ¯ä¸ªåˆ†ç±»åˆ›å»ºè®¾ç½®é¡¹
            categories.forEach(category => {
                const categorySection = document.createElement('div');
                categorySection.className = 'settings-category';
                
                categorySection.innerHTML = `
                    <div class="settings-category-title">
                        <i class="fas fa-folder mr-2 text-gray-600"></i>${category.name}
                    </div>
                `;
                
                const itemsContainer = document.createElement('div');
                itemsContainer.className = 'settings-category-items';
                
                category.topics.forEach(topic => {
                    const isChecked = userSettings[topic];
                    const isRecommended = recommendedTopics.includes(topic);
                    const isNewOnline = isNewOnlineTopic(topic);
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'settings-item';
                    
                    const uniqueId = `${settingsType}_${topic.replace(/\s+/g, '_')}`;
                    
                    // ä¸ºæ¨èä¸“é¢˜æ·»åŠ æ ‡è®°
                    const recommendedMark = isRecommended ? 
                        `<span class="recommended-mark" title="æ¨èä¸“é¢˜"><i class="fas fa-thumbs-up mr-1"></i>æ¨è</span>` : '';
                    
                    // ä¸ºæ–°ä¸Šçº¿ä¸“é¢˜æ·»åŠ çº¢ç‚¹æ ‡è¯†
                    const newTopicDot = isNewOnline ? 
                        `<div class="new-topic-dot" title="æ–°ä¸Šçº¿ä¸“é¢˜"></div>` : '';
                    
                    itemDiv.innerHTML = `
                        <input type="checkbox" id="${uniqueId}" ${isChecked ? 'checked' : ''} 
                            data-topic="${topic}" data-type="${settingsType}">
                        <label for="${uniqueId}" title="${topic}" class="flex items-center">
                            <span class="mr-1">${topic}</span>
                            ${recommendedMark}
                        </label>
                        ${newTopicDot}
                    `;
                    
                    itemsContainer.appendChild(itemDiv);
                });
                
                categorySection.appendChild(itemsContainer);
                container.appendChild(categorySection);
            });
            
            // ä¸ºå…¨é€‰/å…¨ä¸é€‰æ·»åŠ äº‹ä»¶ç›‘å¬
            const selectAllCheckbox = document.getElementById(`selectAll_${settingsType}`);
            selectAllCheckbox.addEventListener('change', function() {
                const checkboxes = container.querySelectorAll('input[type="checkbox"][data-topic]');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = this.checked;
                });
                
                // æ›´æ–°è®¡æ•°
                updateSelectedCount(settingsType);
            });
            
            // ä¸ºå•ä¸ªå¤é€‰æ¡†æ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œæ›´æ–°è®¡æ•°
            const topicCheckboxes = container.querySelectorAll('input[type="checkbox"][data-topic]');
            topicCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    updateSelectedCount(settingsType);
                    
                    // æ£€æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°å…¨é€‰å¤é€‰æ¡†
                    const allChecked = Array.from(topicCheckboxes).every(cb => cb.checked);
                    selectAllCheckbox.checked = allChecked;
                });
            });
        }
        
        // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ä¸“é¢˜éƒ½è¢«é€‰ä¸­
        function areAllSelected(settings) {
            for (const key in settings) {
                if (!settings[key]) return false;
            }
            return true;
        }
        
        // è®¡ç®—å·²é€‰ä¸“é¢˜æ•°é‡
        function countSelectedTopics(settings) {
            let count = 0;
            for (const key in settings) {
                if (settings[key]) count++;
            }
            return count;
        }
        
        // æ›´æ–°å·²é€‰ä¸“é¢˜è®¡æ•°
        function updateSelectedCount(settingsType) {
            const container = settingsType === 'action' ? 
                document.getElementById('settingsActionContent') : 
                document.getElementById('settingsBusinessContent');
                
            const checkboxes = container.querySelectorAll('input[type="checkbox"][data-topic]');
            const checkedCount = Array.from(checkboxes).filter(cb => cb.checked).length;
            
            const countSpan = container.querySelector('.text-sm.text-gray-500');
            if (countSpan) {
                countSpan.textContent = `å·²é€‰ ${checkedCount} ä¸ªä¸“é¢˜`;
            }
        }

        // åˆå§‹åŒ–è®¾ç½®é¢æ¿å’Œç›¸å…³äº‹ä»¶
        function initializeSettingsModal() {
            const settingsModal = document.getElementById('settingsModal');
            const actionContent = document.getElementById('settingsActionContent');
            
            console.log('åˆå§‹åŒ–è®¾ç½®é¢æ¿');
            
            // ç”Ÿæˆè®¾ç½®é¢æ¿å†…å®¹
            generateSettingsContent(actionCategories, 'settingsActionContent');
            
            // ç‚¹å‡»è®¾ç½®é¢æ¿å¤–éƒ¨å…³é—­
            settingsModal.addEventListener('click', (e) => {
                if (e.target === settingsModal) {
                    settingsModal.style.display = 'none';
                    document.body.style.overflow = '';
                }
            });
            
            // å·²ç§»é™¤è®¾ç½®é€‰é¡¹å¡åˆ‡æ¢åŠŸèƒ½
        }
        
        // æ˜¾ç¤ºæç¤ºä¿¡æ¯
        function showToast(message, duration = 2000) {
            // åˆ›å»ºæç¤ºå…ƒç´ 
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded shadow-lg z-50';
            toast.textContent = message;
            
            // æ·»åŠ åˆ°é¡µé¢
            document.body.appendChild(toast);
            
            // å®šæ—¶ç§»é™¤
            setTimeout(() => {
                toast.classList.add('opacity-0');
                toast.style.transition = 'opacity 0.5s';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 500);
            }, duration);
        }

        // å·²ç§»é™¤æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½

// æ–°ä¸“é¢˜å‘ç°å’Œæç¤ºåŠŸèƒ½
        function initNewTopicsDiscovery() {
            // ä»æœåŠ¡å™¨è·å–æ–°ä¸Šçº¿çš„ä¸“é¢˜
            function fetchNewTopics() {
                // å®é™…é¡¹ç›®ä¸­åº”è¯¥æ˜¯APIè°ƒç”¨
                // è¿™é‡Œæ¨¡æ‹Ÿè¿”å›æ–°ä¸“é¢˜æ•°æ®
                return [
                    {id: 101, name: "é˜²æ±›åº”æ€¥ä¸“é¢˜", icon: "fa-umbrella", color: "text-blue-500", category: "å·¡æŸ¥èµ°è®¿"},
                    {id: 102, name: "å¿—æ„¿è€…æœåŠ¡ä¸“é¢˜", icon: "fa-hands-helping", color: "text-green-500", category: "æ´»åŠ¨ç»„ç»‡"},
                    {id: 103, name: "ç¤¾åŒºæ–‡åˆ›ä¸“é¢˜", icon: "fa-paint-brush", color: "text-purple-500", category: "å®£ä¼ æ•™è‚²"}
                ];
            }
            
            // åˆå§‹åŒ–æ–°ä¸“é¢˜æç¤º
            function initNewTopicsBadge() {
                const newTopics = fetchNewTopics();
                const badge = document.getElementById('newTopicsBadge');
                
                if (newTopics.length > 0) {
                    // æ˜¾ç¤ºæ°”æ³¡æ•°å­—
                    badge.querySelector('div').textContent = newTopics.length;
                    badge.style.display = 'block';
                    
                    // è®¾ç½®æ°”æ³¡æç¤ºå†…å®¹
                    const tooltipContent = badge.querySelector('.tooltip-content');
                    tooltipContent.querySelector('.font-medium').textContent = `å‘ç°${newTopics.length}ä¸ªæ–°ä¸“é¢˜`;
                    
                    // æ¸…ç©ºæ—§å†…å®¹
                    tooltipContent.querySelectorAll('.text-xs.mb-1:not(.mt-2)').forEach(el => el.remove());
                    
                    // æ·»åŠ æ–°ä¸“é¢˜é“¾æ¥
                    const addAllBtn = tooltipContent.querySelector('.mt-2');
                    newTopics.forEach(topic => {
                        const topicItem = document.createElement('div');
                        topicItem.className = 'text-xs mb-1';
                        topicItem.innerHTML = `
                            <span class="text-blue-600 hover:underline cursor-pointer" data-id="${topic.id}">${topic.name}</span>
                            <span class="text-gray-500 text-xs">ï¼ˆ${topic.category}ï¼‰</span>
                        `;
                        
                        // ä¸ºä¸“é¢˜åç§°æ·»åŠ ç‚¹å‡»äº‹ä»¶
                        topicItem.querySelector('.text-blue-600').addEventListener('click', () => enableTopic(topic.id));
                        
                        tooltipContent.insertBefore(topicItem, addAllBtn);
                    });
                    
                    // æ˜¾ç¤ºæ–°ä¸“é¢˜ä¸“åŒº
                    renderNewTopicsSection(newTopics);
                } else {
                    badge.style.display = 'none';
                    document.getElementById('newTopicsSection').style.display = 'none';
                }
            }
            
            // æ¸²æŸ“æ–°ä¸“é¢˜ä¸“åŒº
            function renderNewTopicsSection(newTopics) {
                const section = document.getElementById('newTopicsSection');
                const grid = section.querySelector('.topic-grid');
                grid.innerHTML = ''; // æ¸…ç©ºç°æœ‰å†…å®¹
                
                newTopics.forEach(topic => {
                    const topicEl = document.createElement('div');
                    topicEl.className = 'topic-icon new-topic';
                    topicEl.innerHTML = `
                        <div class="absolute top-1 right-1 bg-red-500 w-2 h-2 rounded-full"></div>
                        <i class="fas ${topic.icon} ${topic.color}"></i>
                        <span>${topic.name}</span>
                        <div class="text-xs text-gray-500 mt-1">åˆ†ç±»ï¼š${topic.category}</div>
                        <div class="flex space-x-1 mt-2">
                            <button type="button" data-id="${topic.id}" class="enable-topic-btn flex-1 text-xs bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded cursor-pointer z-10">å¯ç”¨</button>
                            <button type="button" data-id="${topic.id}" class="dismiss-topic-btn flex-1 text-xs bg-gray-300 hover:bg-gray-400 text-gray-700 px-2 py-1 rounded cursor-pointer z-10">æš‚ä¸å¯ç”¨</button>
                        </div>
                    `;
                    grid.appendChild(topicEl);
                    
                    // ç›´æ¥ç»™æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶å¤„ç†
                    const enableBtn = topicEl.querySelector('.enable-topic-btn');
                    const dismissBtn = topicEl.querySelector('.dismiss-topic-btn');
                    
                    if (enableBtn) {
                        enableBtn.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            const id = this.getAttribute('data-id');
                            console.log('ç›´æ¥ç‚¹å‡»å¯ç”¨æŒ‰é’®, ID:', id);
                            if (id) enableTopic(id);
                        });
                    }
                    
                    if (dismissBtn) {
                        dismissBtn.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            const id = this.getAttribute('data-id');
                            console.log('ç›´æ¥ç‚¹å‡»æš‚ä¸å¯ç”¨æŒ‰é’®, ID:', id);
                            if (id) dismissTopic(id);
                        });
                    }
                });
                
                section.style.display = newTopics.length > 0 ? 'block' : 'none';
            }
            
            // è·å–åˆ†ç±»æ ‡ç­¾å’Œé¢œè‰²
            function getCategoryTag(categoryName) {
                // æ ¹æ®åˆ†ç±»åç§°è¿”å›ç®€çŸ­æ ‡ç­¾å’Œå¯¹åº”çš„é¢œè‰²ç±»
                if (categoryName.includes('å®‰å…¨')) return { tagText: 'å®‰å…¨', tagColor: 'bg-indigo-600' };
                if (categoryName.includes('æ°‘ç”Ÿ')) return { tagText: 'æ°‘ç”Ÿ', tagColor: 'bg-pink-500' };
                if (categoryName.includes('å«ç”Ÿ') || categoryName.includes('å¥åº·')) return { tagText: 'å¥åº·', tagColor: 'bg-teal-500' };
                if (categoryName.includes('æ²»ç†') || categoryName.includes('ç¯å¢ƒ')) return { tagText: 'ç¯å¢ƒ', tagColor: 'bg-orange-500' };
                if (categoryName.includes('æ–‡åŒ–') || categoryName.includes('æ•™è‚²')) return { tagText: 'æ–‡åŒ–', tagColor: 'bg-cyan-500' };
                if (categoryName.includes('ç‰¹æ®Šäººç¾¤') || categoryName.includes('å…³æ€€')) return { tagText: 'å…³æ€€', tagColor: 'bg-lime-500' };
                if (categoryName.includes('äº‹åŠ¡') || categoryName.includes('æ•°æ®')) return { tagText: 'æ•°æ®', tagColor: 'bg-gray-500' };
                
                // é»˜è®¤æ ‡ç­¾
                return { tagText: 'ä¸“é¢˜', tagColor: 'bg-blue-500' };
            }

            // å¯ç”¨ä¸“é¢˜
            function enableTopic(topicId) {
                console.log(`å¯ç”¨ä¸“é¢˜ID: ${topicId}`);
                // å®é™…é¡¹ç›®ä¸­åº”å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨å¯ç”¨ä¸“é¢˜
                
                // è·å–ä¸“é¢˜ä¿¡æ¯
                const newTopics = fetchNewTopics();
                const topicInfo = newTopics.find(topic => topic.id == topicId);
                
                if (topicInfo) {
                    // å°†ä¸“é¢˜æ·»åŠ åˆ°å¯¹åº”åˆ†ç±»å¹¶è®¾ç½®ä¸ºæ˜¾ç¤º
                    // æ‰¾åˆ°å¯¹åº”çš„åŠ¨ä½œåˆ†ç±»
                    const matchedCategory = actionCategories.find(cat => cat.name === topicInfo.category);
                    if (matchedCategory && !matchedCategory.topics.includes(topicInfo.name)) {
                        // æ·»åŠ åˆ°å¯¹åº”åˆ†ç±»çš„topicsæ•°ç»„
                        matchedCategory.topics.push(topicInfo.name);
                        
                        // æ›´æ–°ç”¨æˆ·è®¾ç½®ï¼Œè®¾ç½®è¯¥ä¸“é¢˜ä¸ºæ˜¾ç¤º
                        const userSettings = loadUserSettings('action');
                        userSettings[topicInfo.name] = true;
                        saveUserSettings('action', userSettings);
                        
                        // é‡æ–°æ¸²æŸ“ä¸“é¢˜åŒºåŸŸ
                        renderTopics(actionCategories);
                    }
                }
                
                // æ¨¡æ‹Ÿå¯ç”¨åæ•ˆæœ
                showToast(`ä¸“é¢˜å·²å¯ç”¨ï¼Œå°†åœ¨æ‚¨çš„å·¥ä½œä¸“åŒºä¸­æ˜¾ç¤º`);
                
                try {
                    // éšè—è¯¥ä¸“é¢˜å¡ç‰‡ - ä½¿ç”¨æ›´å¯é çš„æŸ¥è¯¢æ–¹å¼
                    const cards = document.querySelectorAll('.topic-icon.new-topic');
                    cards.forEach(card => {
                        const btn = card.querySelector(`button.enable-topic-btn[data-id="${topicId}"]`);
                        if (btn) {
                            card.style.display = 'none';
                        }
                    });
                } catch (err) {
                    console.error('éšè—ä¸“é¢˜å¡ç‰‡é”™è¯¯:', err);
                }
                
                // ä»åˆ—è¡¨ä¸­ç§»é™¤è¯¥ä¸“é¢˜
                removeTopicFromList(topicId);
            }
            
            // æš‚ä¸å¯ç”¨ä¸“é¢˜
            function dismissTopic(topicId) {
                console.log(`æš‚ä¸å¯ç”¨ä¸“é¢˜ID: ${topicId}`);
                // å®é™…é¡¹ç›®ä¸­åº”å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨æ ‡è®°è¯¥ä¸“é¢˜ä¸ºå·²æ‹’ç»
                
                // æç¤ºç”¨æˆ·
                showToast(`æš‚ä¸å¯ç”¨è¯¥ä¸“é¢˜ï¼Œå¯éšæ—¶åœ¨ä¸“é¢˜è®¾ç½®ä¸­å¯ç”¨`);
                
                try {
                    // éšè—è¯¥ä¸“é¢˜å¡ç‰‡ - ä½¿ç”¨æ›´å¯é çš„æŸ¥è¯¢æ–¹å¼
                    const cards = document.querySelectorAll('.topic-icon.new-topic');
                    cards.forEach(card => {
                        const btn = card.querySelector(`button.dismiss-topic-btn[data-id="${topicId}"]`);
                        if (btn) {
                            card.style.display = 'none';
                        }
                    });
                } catch (err) {
                    console.error('éšè—ä¸“é¢˜å¡ç‰‡é”™è¯¯:', err);
                }
                
                // ä»åˆ—è¡¨ä¸­ç§»é™¤è¯¥ä¸“é¢˜
                removeTopicFromList(topicId);
            }
            
            // ä»åˆ—è¡¨ä¸­ç§»é™¤ä¸“é¢˜
            function removeTopicFromList(topicId) {
                // ä»åˆ—è¡¨ä¸­ç§»é™¤è¯¥ä¸“é¢˜
                const newTopics = fetchNewTopics().filter(topic => topic.id != topicId);
                localStorage.setItem('newTopics', JSON.stringify(newTopics));
                
                // åˆ·æ–°æ–°ä¸“é¢˜åˆ—è¡¨æ˜¾ç¤º
                initNewTopicsBadge();
                
                // å¦‚æœæ²¡æœ‰æ–°ä¸“é¢˜äº†ï¼Œéšè—æ–°ä¸“é¢˜ä¸“åŒº
                if (newTopics.length === 0) {
                    document.getElementById('newTopicsSection').style.display = 'none';
                    document.getElementById('newTopicsBadge').style.display = 'none';
                }
            }
            
            // æ‰¹é‡å¯ç”¨æ‰€æœ‰æ–°ä¸“é¢˜
            function enableAllNewTopics() {
                const newTopics = fetchNewTopics();
                if (newTopics.length > 0) {
                    const topicIds = newTopics.map(topic => topic.id);
                    
                    console.log(`æ‰¹é‡å¯ç”¨ä¸“é¢˜: ${topicIds.join(', ')}`);
                    
                    // å°†æ‰€æœ‰ä¸“é¢˜æ·»åŠ åˆ°å¯¹åº”åˆ†ç±»å¹¶è®¾ç½®ä¸ºæ˜¾ç¤º
                    const userSettings = loadUserSettings('action');
                    
                    newTopics.forEach(topicInfo => {
                        // æ‰¾åˆ°å¯¹åº”çš„åŠ¨ä½œåˆ†ç±»
                        const matchedCategory = actionCategories.find(cat => cat.name === topicInfo.category);
                        if (matchedCategory && !matchedCategory.topics.includes(topicInfo.name)) {
                            // æ·»åŠ åˆ°å¯¹åº”åˆ†ç±»çš„topicsæ•°ç»„
                            matchedCategory.topics.push(topicInfo.name);
                            
                            // è®¾ç½®è¯¥ä¸“é¢˜ä¸ºæ˜¾ç¤º
                            userSettings[topicInfo.name] = true;
                        }
                    });
                    
                    // ä¿å­˜è®¾ç½®
                    saveUserSettings('action', userSettings);
                    
                    // é‡æ–°æ¸²æŸ“ä¸“é¢˜åŒºåŸŸ
                    renderTopics(actionCategories);
                    
                    // å®é™…é¡¹ç›®ä¸­åº”å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨æ‰¹é‡å¯ç”¨ä¸“é¢˜
                    showToast(`å·²å¯ç”¨å…¨éƒ¨${newTopics.length}ä¸ªæ–°ä¸“é¢˜ï¼Œå·²æ˜¾ç¤ºåœ¨å¯¹åº”åˆ†ç±»ä¸­`);
                    
                    // æ¸…ç©ºæ–°ä¸“é¢˜åˆ—è¡¨
                    localStorage.setItem('newTopics', JSON.stringify([]));
                    
                    // éšè—æ–°ä¸“é¢˜ç›¸å…³UI
                    document.getElementById('newTopicsSection').style.display = 'none';
                    document.getElementById('newTopicsBadge').style.display = 'none';
                }
            }
            
            // ç»‘å®šäº‹ä»¶
            document.getElementById('newTopicsBadge').addEventListener('click', function(e) {
                this.querySelector('.tooltip-content').classList.toggle('hidden');
                e.stopPropagation(); // é˜»æ­¢å†’æ³¡
            });
            
            // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­æç¤º
            document.addEventListener('click', function() {
                document.getElementById('newTopicsBadge').querySelector('.tooltip-content').classList.add('hidden');
            });
            
            document.getElementById('addAllNewTopics').addEventListener('click', function(e) {
                e.stopPropagation(); // é˜»æ­¢å†’æ³¡
                enableAllNewTopics();
            });
            
            document.getElementById('addAllNewTopicsBtn').addEventListener('click', enableAllNewTopics);
            
            // åˆå§‹åŒ–
            initNewTopicsBadge();
            
            // å®šæœŸæ£€æŸ¥æ–°ä¸“é¢˜(æ¯5åˆ†é’Ÿ)
            setInterval(initNewTopicsBadge, 5 * 60 * 1000);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ¸…é™¤ç°æœ‰è®¾ç½®ï¼Œç¡®ä¿ä½¿ç”¨æœ€æ–°çš„æ¨èä¸“é¢˜é€»è¾‘
            localStorage.removeItem('topicSettings_action');
            
            // åˆå§‹åŒ–ç”¨æˆ·è®¾ç½®
            initializeUserSettings();
            
            // åˆå§‹åŒ–è®¾ç½®é¢æ¿
            initializeSettingsModal();
            
            // åˆå§‹åŒ–æ–°ä¸“é¢˜å‘ç°åŠŸèƒ½
            initNewTopicsDiscovery();
            
            // æ¸²æŸ“ä¸“é¢˜
            renderTopics(actionCategories);
            
            // ç¡®ä¿åˆ†ç±»å±•ç¤ºåŒºåŸŸå¯è§
            const topicDisplayArea = document.getElementById('topicDisplayArea');
            if (topicDisplayArea) {
                topicDisplayArea.style.display = 'block';
            }
            
            // è°ƒè¯•ä¿¡æ¯
            console.log('å·²åŠ è½½çš„ä¸“é¢˜è®¾ç½®:', loadUserSettings('action'));
        });

        // åº”ç”¨ç”¨æˆ·è®¾ç½®
        function applyUserSettings() {
            // ä¿å­˜ä¸“é¢˜è®¾ç½®
            const userSettings = {};
            document.querySelectorAll('#settingsActionContent input[type="checkbox"][data-topic]').forEach(checkbox => {
                userSettings[checkbox.dataset.topic] = checkbox.checked;
            });
            saveUserSettings('action', userSettings);
            console.log('ä¿å­˜ä¸“é¢˜è®¾ç½®:', userSettings);
            
            // é‡æ–°æ¸²æŸ“ä¸“é¢˜
            renderTopics(actionCategories);
            
            // éšè—æ–°ä¸“é¢˜åŒºåŸŸï¼ˆç”¨æˆ·å·²åœ¨è®¾ç½®ä¸­å¤„ç†äº†æ–°ä¸“é¢˜ï¼‰
            const newTopicsSection = document.getElementById('newTopicsSection');
            if (newTopicsSection) {
                newTopicsSection.style.display = 'none';
            }
            
            // éšè—æ–°ä¸“é¢˜å¾½ç« 
            const newTopicsBadge = document.getElementById('newTopicsBadge');
            if (newTopicsBadge) {
                newTopicsBadge.style.display = 'none';
            }
            
            // å…³é—­è®¾ç½®é¢æ¿
            document.getElementById('settingsModal').style.display = 'none';
            document.body.style.overflow = '';
            
            // æ˜¾ç¤ºæˆåŠŸæç¤º
            showToast('è®¾ç½®å·²æˆåŠŸåº”ç”¨');
        }

        // é‡ç½®ç”¨æˆ·è®¾ç½®
        function resetUserSettings() {
            if (confirm('ç¡®å®šè¦æ¢å¤é»˜è®¤è®¾ç½®å—ï¼Ÿå°†åªæ˜¾ç¤ºæ¨èçš„å¸¸ç”¨ä¸“é¢˜ã€‚')) {
                // åˆ é™¤ç°æœ‰è®¾ç½®
                localStorage.removeItem('topicSettings_action');
                
                // é‡æ–°åˆå§‹åŒ–é»˜è®¤è®¾ç½®ï¼ˆåªæ˜¾ç¤ºæ¨èä¸“é¢˜ï¼‰
                const userSettings = {};
                
                // è®¾ç½®é»˜è®¤å€¼
                actionCategories.forEach(category => {
                    category.topics.forEach(topic => {
                        // åªæœ‰æ¨èä¸“é¢˜é»˜è®¤æ˜¾ç¤º
                        userSettings[topic] = recommendedTopics.includes(topic);
                    });
                });
                
                // ä¿å­˜é»˜è®¤è®¾ç½®
                saveUserSettings('action', userSettings);
                
                // æ›´æ–°è®¾ç½®é¢æ¿
                generateSettingsContent(actionCategories, 'settingsActionContent');
                
                // é‡æ–°æ¸²æŸ“ä¸“é¢˜
                renderTopics(actionCategories);
                
                showToast('å·²æ¢å¤æ¨èä¸“é¢˜çš„é»˜è®¤è®¾ç½®');
            }
        }
    </script>
    
    <!-- åº•éƒ¨ç‰ˆæƒä¿¡æ¯ -->
    <footer class="py-4 bg-white mt-8 border-t">
        <div class="container mx-auto px-4">
            <div class="text-center text-gray-500 text-sm">
                Â© 2025 ç¤¾å°æ™ºå¹³å° ç‰ˆæƒæ‰€æœ‰
            </div>
        </div>
    </footer>
</body>
</html> 