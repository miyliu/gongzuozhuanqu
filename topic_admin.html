<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>专题配置管理 - 社小智管理后台</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #1e40af;
            --primary-light: #e0e7ff;
            --primary-dark: #1e3a8a;
            --secondary-color: #475569;
            --text-color: #333;
            --light-gray: #f8fafc;
            --border-color: #e2e8f0;
        }
        
        body {
            font-family: "Microsoft YaHei", "PingFang SC", "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: #f1f5f9;
            overflow-x: hidden;
        }
        
        .top-header {
            background-color: var(--primary-color);
            color: white;
            height: 56px;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
        }
        
        .sidebar {
            background-color: #fff;
            width: 240px;
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            position: fixed;
            top: 56px;
            bottom: 0;
            z-index: 40;
        }
        
        .main-content {
            margin-left: 240px;
            padding: 20px;
            min-height: calc(100vh - 56px);
        }
        
        .menu-item {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            cursor: pointer;
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }
        
        .menu-item:hover {
            background-color: #f8fafc;
        }
        
        .menu-item.active {
            border-left-color: var(--primary-color);
            background-color: var(--primary-light);
            color: var(--primary-color);
        }
        
        .menu-item i {
            margin-right: 12px;
            width: 18px;
            text-align: center;
        }
        
        .submenu-item {
            padding: 10px 16px 10px 46px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .submenu-item:hover {
            background-color: #f8fafc;
        }
        
        .submenu-item.active {
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .card-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            font-weight: 600;
            color: var(--text-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-body {
            padding: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
        }
        
        .form-control {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .submit-btn {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 16px;
            border-radius: 4px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .submit-btn:hover {
            background-color: var(--primary-dark);
        }
        
        .cancel-btn {
            background-color: #e5e7eb;
            color: #4b5563;
            padding: 10px 16px;
            border-radius: 4px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .cancel-btn:hover {
            background-color: #d1d5db;
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table thead {
            background-color: #f1f5f9;
        }
        
        .admin-table th {
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: #475569;
            border-bottom: 1px solid var(--border-color);
        }
        
        .admin-table td {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .admin-table tr:hover {
            background-color: #f8fafc;
        }
        
        .status-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-online {
            background-color: #dcfce7;
            color: #16a34a;
        }
        
        .status-offline {
            background-color: #fee2e2;
            color: #dc2626;
        }
        
        .status-draft {
            background-color: #e0e7ff;
            color: #4f46e5;
        }
        
        .status-new {
            background-color: #fef3c7;
            color: #d97706;
        }
        
        .action-btn {
            padding: 6px;
            border-radius: 4px;
            background-color: #f1f5f9;
            border: none;
            cursor: pointer;
            margin-right: 4px;
            color: #475569;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background-color: #e2e8f0;
        }
        
        .edit-btn:hover {
            color: #2563eb;
        }
        
        .delete-btn:hover {
            color: #dc2626;
        }
        
        .pagination-container {
            background-color: white;
            border-radius: 8px;
            padding: 12px 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .pagination-item {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 38px;
            height: 38px;
            margin: 0 3px;
            border-radius: 6px;
            background-color: white;
            border: 1px solid #e5e7eb;
            color: #4b5563;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        
        .pagination-item:hover:not(.disabled) {
            background-color: var(--primary-light);
            border-color: var(--primary-color);
            color: var(--primary-color);
            transform: translateY(-1px);
            box-shadow: 0 2px 5px rgba(30, 64, 175, 0.1);
        }
        
        .pagination-item.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            box-shadow: 0 2px 5px rgba(30, 64, 175, 0.2);
        }
        
        .pagination-item.disabled {
            opacity: 0.4;
            cursor: not-allowed;
            background-color: #f3f4f6;
            box-shadow: none;
        }
        
        .pagination-item i {
            font-size: 12px;
        }
        
        .pagination-divider {
            width: 20px;
            text-align: center;
            color: #9ca3af;
            font-size: 14px;
        }
        
        .page-jump-container {
            display: flex;
            align-items: center;
            background-color: white;
            border-radius: 6px;
            padding: 5px 10px;
            border: 1px solid #e5e7eb;
            transition: all 0.2s;
        }
        
        .page-jump-container:focus-within {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .page-jump-input {
            width: 40px;
            border: none;
            text-align: center;
            outline: none;
            font-size: 14px;
            color: var(--text-color);
            padding: 4px;
        }
        
        .page-jump-btn {
            background-color: var(--primary-light);
            color: var(--primary-color);
            font-weight: 500;
            font-size: 13px;
            padding: 4px 10px;
            border-radius: 4px;
            border: none;
            margin-left: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .page-jump-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .page-size-select {
            padding: 6px 10px;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
            font-size: 14px;
            color: var(--text-color);
            background-color: white;
            cursor: pointer;
            transition: all 0.2s;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%236b7280'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
            background-position: right 8px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 28px;
        }
        
        .page-size-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .pagination-info {
            font-size: 14px;
            color: #6b7280;
        }
        
        /* 上传样式 */
        .upload-container {
            border: 1px dashed #d1d5db;
            border-radius: 4px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .upload-container:hover {
            border-color: var(--primary-color);
            background-color: var(--primary-light);
        }
        
        .upload-preview {
            width: 80px;
            height: 80px;
            margin: 0 auto 8px;
            background-color: #f3f4f6;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .upload-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        /* 开关样式 */
        .switch-toggle {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        
        .switch-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        .switch-toggle input:checked + .toggle-slider {
            background-color: var(--primary-color);
        }
        
        .switch-toggle input:checked + .toggle-slider:before {
            transform: translateX(20px);
        }
    </style>
</head>
<body>
    <!-- 顶部导航 -->
    <header class="top-header fixed w-full z-50">
        <div class="container mx-auto px-4 h-full flex items-center justify-between">
            <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="white">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                </svg>
                <div class="ml-3 text-xl font-bold">社小智管理后台</div>
            </div>
            <div class="flex items-center">
                <div class="mr-4 text-sm">管理员</div>
                <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center">
                    <i class="fas fa-user text-gray-500"></i>
                </div>
            </div>
        </div>
    </header>
    
    <!-- 侧边栏 -->
    <aside class="sidebar">
        <!-- 系统管理菜单组 -->
        <div class="menu-group">
            <div class="menu-item active">
                <i class="fas fa-cog"></i>
                <span>系统管理</span>
            </div>
            <div class="submenu">
                <div class="submenu-item active">专题配置</div>
                <div class="submenu-item">
                    <a href="topic_category_admin.html" class="block w-full h-full">专题分类管理</a>
                </div>
            </div>
        </div>
    </aside>
    
    <!-- 主要内容 -->
    <main class="main-content pt-16">
        <!-- 页面标题 -->
        <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-800">专题配置</h1>
        </div>
        
        <!-- 列表和搜索 -->
        <div class="card">
            <div class="card-header">
                <div>专题列表</div>
                <div class="flex">
                    <div>
                        <button class="submit-btn" id="addTopicBtn">
                            <i class="fas fa-plus mr-1"></i> 新增专题
                        </button>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <!-- 搜索栏 -->
                <div class="flex mb-6 items-center">
                    <div class="flex-1">
                        <div class="relative">
                            <input type="text" placeholder="搜索专题名称..." class="form-control pl-10">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        </div>
                    </div>
                    <div class="ml-4">
                        <button class="submit-btn">搜索</button>
                    </div>
                    <div class="ml-2">
                        <button class="cancel-btn">重置</button>
                    </div>
                </div>
                
                <!-- 筛选选项 -->
                <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6">
                    <div>
                        <label class="form-label">分类筛选</label>
                        <select class="form-control" id="actionCategoryFilter">
                            <option value="">全部</option>
                            <option value="宣传活动">宣传活动</option>
                            <option value="巡查走访">巡查走访</option>
                            <option value="工作总结">工作总结</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">页面样式</label>
                        <select class="form-control" id="pageStyleFilter">
                            <option value="">全部</option>
                            <option value="宣传活动">宣传活动</option>
                            <option value="巡查走访">巡查走访</option>
                            <option value="工作总结">工作总结</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">是否上线</label>
                        <select class="form-control" id="isOnlineFilter">
                            <option value="">全部</option>
                            <option value="上线">已上线</option>
                            <option value="未上线">未上线</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">是否推荐</label>
                        <select class="form-control" id="isRecommendedFilter">
                            <option value="">全部</option>
                            <option value="推荐">已推荐</option>
                            <option value="未推荐">未推荐</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">新上线状态</label>
                        <select class="form-control" id="isNewOnlineFilter">
                            <option value="">全部</option>
                            <option value="是">是</option>
                            <option value="否">否</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">排序方式</label>
                        <select class="form-control" id="sortTypeFilter">
                            <option value="sortValue">排序数字大的在上</option>
                            <option value="updateTime">更新时间近的在上</option>
                        </select>
                    </div>
                </div>
                
                <!-- 表格 -->
                <div class="table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th width="5%">序号</th>
                                <th width="12%">专题名称</th>
                                <th width="8%">PC图标</th>
                                <th width="8%">小程序图标</th>
                                <th width="12%">分类</th>
                                <th width="7%">排序</th>
                                <th width="7%">是否推荐</th>
                                <th width="7%">新上线</th>
                                <th width="7%">状态</th>
                                <th width="12%">更新时间</th>
                                <th width="12%">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>社区文体活动</td>
                                <td>
                                    <img src="https://img.icons8.com/color/48/000000/calendar-plus.png" alt="PC图标" class="w-8 h-8">
                                </td>
                                <td>
                                    <img src="https://img.icons8.com/ios-filled/50/1e40af/calendar-plus.png" alt="小程序图标" class="w-8 h-8">
                                </td>
                                <td>宣传活动</td>
                                <td>101</td>
                                <td>
                                    <span class="status-badge status-online">推荐</span>
                                </td>
                                <td>
                                    <span class="status-badge status-new">新上线</span>
                                </td>
                                <td>
                                    <span class="status-badge status-online">上线</span>
                                </td>
                                <td>2025-06-15 14:30</td>
                                <td>
                                    <button class="action-btn open-btn" title="打开页面">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="action-btn edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>垃圾分类专题</td>
                                <td>
                                    <img src="https://img.icons8.com/color/48/000000/recycle-bin.png" alt="PC图标" class="w-8 h-8">
                                </td>
                                <td>
                                    <img src="https://img.icons8.com/ios-filled/50/1e40af/waste-sorting.png" alt="小程序图标" class="w-8 h-8">
                                </td>
                                <td>宣传活动</td>
                                <td>98</td>
                                <td>
                                    <span class="status-badge status-online">推荐</span>
                                </td>
                                <td>
                                    <!-- 非新上线不显示 -->
                                </td>
                                <td>
                                    <span class="status-badge status-online">上线</span>
                                </td>
                                <td>2025-06-14 09:15</td>
                                <td>
                                    <button class="action-btn open-btn" title="打开页面">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="action-btn edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>矛盾调解专题</td>
                                <td>
                                    <img src="https://img.icons8.com/color/48/000000/scales--v1.png" alt="PC图标" class="w-8 h-8">
                                </td>
                                <td>
                                    <img src="https://img.icons8.com/ios-filled/50/1e40af/scales--v1.png" alt="小程序图标" class="w-8 h-8">
                                </td>
                                <td>巡查走访</td>
                                <td>105</td>
                                <td>
                                    <!-- 未推荐不显示 -->
                                </td>
                                <td>
                                    <span class="status-badge status-new">新上线</span>
                                </td>
                                <td>
                                    <span class="status-badge status-offline">未上线</span>
                                </td>
                                <td>2025-06-13 16:25</td>
                                <td>
                                    <button class="action-btn open-btn" title="打开页面">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="action-btn edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>防疫专题</td>
                                <td>
                                    <img src="https://img.icons8.com/color/48/000000/protection-mask.png" alt="PC图标" class="w-8 h-8">
                                </td>
                                <td>
                                    <img src="https://img.icons8.com/ios-filled/50/1e40af/protection-mask.png" alt="小程序图标" class="w-8 h-8">
                                </td>
                                <td>宣传活动</td>
                                <td>97</td>
                                <td>
                                    <span class="status-badge status-online">推荐</span>
                                </td>
                                <td>
                                    <!-- 非新上线不显示 -->
                                </td>
                                <td>
                                    <span class="status-badge status-offline">未上线</span>
                                </td>
                                <td>2025-06-12 11:40</td>
                                <td>
                                    <button class="action-btn open-btn" title="打开页面">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="action-btn edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>困难群众救助</td>
                                <td>
                                    <img src="https://img.icons8.com/color/48/000000/welfare.png" alt="PC图标" class="w-8 h-8">
                                </td>
                                <td>
                                    <img src="https://img.icons8.com/ios-filled/50/1e40af/welfare.png" alt="小程序图标" class="w-8 h-8">
                                </td>
                                <td>巡查走访</td>
                                <td>104</td>
                                <td>
                                    <span class="status-badge status-online">推荐</span>
                                </td>
                                <td>
                                    <!-- 非新上线不显示 -->
                                </td>
                                <td>
                                    <span class="status-badge status-online">上线</span>
                                </td>
                                <td>2025-06-11 15:20</td>
                                <td>
                                    <button class="action-btn open-btn" title="打开页面">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="action-btn edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>特殊人群关怀</td>
                                <td>
                                    <img src="https://img.icons8.com/color/48/000000/trust.png" alt="PC图标" class="w-8 h-8">
                                </td>
                                <td>
                                    <img src="https://img.icons8.com/ios-filled/50/1e40af/trust.png" alt="小程序图标" class="w-8 h-8">
                                </td>
                                <td>巡查走访</td>
                                <td>99</td>
                                <td>
                                    <!-- 未推荐不显示 -->
                                </td>
                                <td>
                                    <span class="status-badge status-new">新上线</span>
                                </td>
                                <td>
                                    <span class="status-badge status-offline">未上线</span>
                                </td>
                                <td>2025-06-10 09:30</td>
                                <td>
                                    <button class="action-btn open-btn" title="打开页面">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="action-btn edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>人口普查专题</td>
                                <td>
                                    <img src="https://img.icons8.com/color/48/000000/find-user-male.png" alt="PC图标" class="w-8 h-8">
                                </td>
                                <td>
                                    <img src="https://img.icons8.com/ios-filled/50/1e40af/find-user-male.png" alt="小程序图标" class="w-8 h-8">
                                </td>
                                <td>工作总结</td>
                                <td>100</td>
                                <td>
                                    <!-- 未推荐不显示 -->
                                </td>
                                <td>
                                    <!-- 非新上线不显示 -->
                                </td>
                                <td>
                                    <span class="status-badge status-online">上线</span>
                                </td>
                                <td>2025-06-09 13:45</td>
                                <td>
                                    <button class="action-btn open-btn" title="打开页面">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="action-btn edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td>社区安全巡查</td>
                                <td>
                                    <img src="https://img.icons8.com/color/48/000000/shield.png" alt="PC图标" class="w-8 h-8">
                                </td>
                                <td>
                                    <img src="https://img.icons8.com/ios-filled/50/1e40af/shield.png" alt="小程序图标" class="w-8 h-8">
                                </td>
                                <td>巡查走访</td>
                                <td>103</td>
                                <td>
                                    <span class="status-badge status-online">推荐</span>
                                </td>
                                <td>
                                    <span class="status-badge status-new">新上线</span>
                                </td>
                                <td>
                                    <span class="status-badge status-online">上线</span>
                                </td>
                                <td>2025-06-08 16:10</td>
                                <td>
                                    <button class="action-btn open-btn" title="打开页面">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="action-btn edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>9</td>
                                <td>教育帮扶计划</td>
                                <td>
                                    <img src="https://img.icons8.com/color/48/000000/classroom.png" alt="PC图标" class="w-8 h-8">
                                </td>
                                <td>
                                    <img src="https://img.icons8.com/ios-filled/50/1e40af/classroom.png" alt="小程序图标" class="w-8 h-8">
                                </td>
                                <td>宣传活动</td>
                                <td>102</td>
                                <td>
                                    <!-- 未推荐不显示 -->
                                </td>
                                <td>
                                    <!-- 非新上线不显示 -->
                                </td>
                                <td>
                                    <span class="status-badge status-online">上线</span>
                                </td>
                                <td>2025-06-07 10:05</td>
                                <td>
                                    <button class="action-btn open-btn" title="打开页面">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="action-btn edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td>环境治理专题</td>
                                <td>
                                    <img src="https://img.icons8.com/color/48/000000/forest.png" alt="PC图标" class="w-8 h-8">
                                </td>
                                <td>
                                    <img src="https://img.icons8.com/ios-filled/50/1e40af/forest.png" alt="小程序图标" class="w-8 h-8">
                                </td>
                                <td>巡查走访</td>
                                <td>96</td>
                                <td>
                                    <span class="status-badge status-online">推荐</span>
                                </td>
                                <td>
                                    <span class="status-badge status-new">新上线</span>
                                </td>
                                <td>
                                    <span class="status-badge status-offline">未上线</span>
                                </td>
                                <td>2025-06-06 14:55</td>
                                <td>
                                    <button class="action-btn open-btn" title="打开页面">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="action-btn edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- 分页 -->
                <div class="flex items-center justify-between mt-6 pagination-container">
                    <!-- 每页显示条数选择 -->
                    <div class="flex items-center">
                        <span class="text-sm text-gray-600 mr-2">每页显示</span>
                        <select id="pageSizeSelector" class="page-size-select">
                            <option value="10" selected>10条</option>
                            <option value="20">20条</option>
                            <option value="50">50条</option>
                            <option value="100">100条</option>
                        </select>
                        <span class="ml-4 pagination-info">共 <span class="font-medium">86</span> 条记录</span>
                    </div>
                    
                    <!-- 分页控件 -->
                    <div class="pagination">
                        <div class="pagination-item disabled" title="首页">
                            <i class="fas fa-angle-double-left"></i>
                        </div>
                        <div class="pagination-item disabled" title="上一页">
                            <i class="fas fa-angle-left"></i>
                        </div>
                        <div class="pagination-item active">1</div>
                        <div class="pagination-item">2</div>
                        <div class="pagination-item">3</div>
                        <div class="pagination-item">4</div>
                        <div class="pagination-item">5</div>
                        <div class="pagination-item" title="下一页">
                            <i class="fas fa-angle-right"></i>
                        </div>
                        <div class="pagination-item" title="末页">
                            <i class="fas fa-angle-double-right"></i>
                        </div>
                    </div>
                    
                    <!-- 跳转到指定页 -->
                    <div class="flex items-center">
                        <span class="text-sm text-gray-600 mr-2">跳至</span>
                        <div class="page-jump-container">
                            <input type="number" min="1" max="9" value="1" class="page-jump-input" id="pageJumpInput">
                            <span class="text-sm text-gray-500">/ 9</span>
                        </div>
                        <button class="page-jump-btn" id="pageJumpBtn">跳转</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 右侧弹出式编辑/新增页面 -->
        <div id="sidePanel" class="fixed top-0 right-0 h-full w-0 bg-white shadow-lg z-50 overflow-x-hidden transition-all duration-300" style="max-width: 600px; box-shadow: -5px 0 15px rgba(0,0,0,0.2);">
            <div class="p-6 h-full flex flex-col">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold" id="sidePanelTitle">编辑专题</h2>
                    <button id="closeSidePanel" class="text-gray-500 hover:text-gray-700 focus:outline-none">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="overflow-y-auto flex-grow">
                    <form id="topicForm">
                        <!-- 基础信息 -->
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold mb-4">基础信息</h3>
                            
                            <div class="mb-4">
                                <label class="form-label">页面样式 <span class="text-red-500">*</span></label>
                                <select class="form-control" id="pageStyle" name="pageStyle" required>
                                    <option value="">请选择页面样式</option>
                                    <option value="宣传活动">宣传活动</option>
                                    <option value="巡查走访">巡查走访</option>
                                    <option value="工作总结">工作总结</option>
                                </select>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">专题名称 <span class="text-red-500">*</span></label>
                                <input type="text" class="form-control" id="topicName" name="topicName" placeholder="请输入专题名称（不超过10个字）" maxlength="10">
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">专题指引文字</label>
                                <textarea class="form-control" id="topicGuide" name="topicGuide" placeholder="请输入专题指引文字（300字以内）" maxlength="300" rows="4"></textarea>
                                <p class="text-xs text-gray-500 mt-1"><span id="guideCharCount">0</span>/300</p>
                            </div>
                            
                            <div class="mb-4" id="presetPromptSection" style="display: none;">
                                <label class="form-label">专题主页预置提示词</label>
                                <textarea class="form-control" id="presetPrompt" name="presetPrompt" placeholder="请输入专题主页的预置提示词" rows="4"></textarea>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">AI助手智能体 <span class="text-red-500">*</span></label>
                                <div class="flex">
                                    <div class="flex-1 mr-2">
                                        <input type="text" class="form-control" id="aiAssistantSearch" placeholder="搜索AI助手...">
                                    </div>
                                    <button type="button" class="submit-btn" id="searchAiBtn">搜索</button>
                                </div>
                                <div class="mt-2 border border-gray-200 rounded max-h-32 overflow-y-auto p-2 bg-gray-50">
                                    <div class="mb-2">
                                        <label class="flex items-center">
                                            <input type="radio" name="aiAssistant" value="社区政策顾问" class="mr-2">
                                            <span>社区政策顾问</span>
                                        </label>
                                    </div>
                                    <div class="mb-2">
                                        <label class="flex items-center">
                                            <input type="radio" name="aiAssistant" value="信息收集助手" class="mr-2">
                                            <span>信息收集助手</span>
                                        </label>
                                    </div>
                                    <div class="mb-2">
                                        <label class="flex items-center">
                                            <input type="radio" name="aiAssistant" value="文档写作专家" class="mr-2">
                                            <span>文档写作专家</span>
                                        </label>
                                    </div>
                                    <div class="mb-2">
                                        <label class="flex items-center">
                                            <input type="radio" name="aiAssistant" value="社区服务智能助理" class="mr-2">
                                            <span>社区服务智能助理</span>
                                        </label>
                                    </div>
                                    <div>
                                        <label class="flex items-center">
                                            <input type="radio" name="aiAssistant" value="社区医疗咨询师" class="mr-2">
                                            <span>社区医疗咨询师</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">工作流程指引（PC端）</label>
                                <textarea class="form-control" id="workflowGuidePc" name="workflowGuidePc" placeholder="请输入PC端工作流程指引HTML代码" rows="6"></textarea>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">工作流程指引（小程序端）</label>
                                <textarea class="form-control" id="workflowGuideMini" name="workflowGuideMini" placeholder="请输入小程序端工作流程指引HTML代码" rows="6"></textarea>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">PC图标</label>
                                <div class="upload-container" id="pcIconUpload">
                                    <div class="upload-preview">
                                        <img id="pcIconPreview" src="" alt="PC图标预览">
                                    </div>
                                    <div class="text-sm text-gray-500">点击上传PC端图标<br>(建议尺寸: 48x48px)</div>
                                    <input type="file" id="pcIconInput" accept="image/*" class="hidden">
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">小程序图标</label>
                                <div class="upload-container" id="miniIconUpload">
                                    <div class="upload-preview">
                                        <img id="miniIconPreview" src="" alt="小程序图标预览">
                                    </div>
                                    <div class="text-sm text-gray-500">点击上传小程序图标<br>(建议尺寸: 48x48px)</div>
                                    <input type="file" id="miniIconInput" accept="image/*" class="hidden">
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="form-label">状态设置</label>
                                <div class="flex items-center mt-2">
                                    <label class="switch-toggle mr-2">
                                        <input type="checkbox" id="isOnline" name="isOnline">
                                        <span class="toggle-slider"></span>
                                    </label>
                                    <span>是否上线</span>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center mt-2">
                                    <label class="switch-toggle mr-2">
                                        <input type="checkbox" id="isRecommended" name="isRecommended">
                                        <span class="toggle-slider"></span>
                                    </label>
                                    <span>是否推荐</span>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center mt-2">
                                    <label class="switch-toggle mr-2">
                                        <input type="checkbox" id="isNewOnline" name="isNewOnline">
                                        <span class="toggle-slider"></span>
                                    </label>
                                    <span>是否新上线</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 分类与排序信息 -->
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold mb-4">分类与排序信息</h3>
                            
                            <div class="mb-4">
                                <label class="form-label">分类（单选） <span class="text-red-500">*</span></label>
                                <div class="radio-group">
                                    <label class="radio-item mb-2 block">
                                        <input type="radio" name="actionCategory" value="宣传活动" class="action-category-radio mr-2"> 宣传活动
                                    </label>
                                    <label class="radio-item mb-2 block">
                                        <input type="radio" name="actionCategory" value="巡查走访" class="action-category-radio mr-2"> 巡查走访
                                    </label>
                                    <label class="radio-item mb-2 block">
                                        <input type="radio" name="actionCategory" value="工作总结" class="action-category-radio mr-2"> 工作总结
                                    </label>
                                </div>
                            </div>
                            
                            <!-- 排序设置 -->
                            <div class="mb-4">
                                <label class="form-label">排序值设置 <span class="text-red-500">*</span></label>
                                <div class="text-sm text-gray-600 mb-2">数值越大越靠前</div>
                                <input type="number" class="form-control" id="sortValue" name="sortValue" min="1" max="120" value="100">
                            </div>
                        </div>
                    </form>
                </div>
                
                <div class="flex justify-end pt-4 border-t mt-4">
                    <button type="button" class="cancel-btn mr-3" id="cancelTopicBtn">取消</button>
                    <button type="button" class="submit-btn" id="saveTopicBtn">保存</button>
                </div>
            </div>
        </div>
    </main>
    
    <script>
        // 菜单展开/收起功能
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function() {
                const submenu = this.nextElementSibling;
                if (submenu && submenu.classList.contains('submenu')) {
                    submenu.style.display = submenu.style.display === 'none' ? 'block' : 'none';
                }
                
                // 切换菜单激活状态
                document.querySelectorAll('.menu-item').forEach(menuItem => {
                    menuItem.classList.remove('active');
                });
                this.classList.add('active');
            });
        });
        
        // 上传图片预览功能
        document.querySelectorAll('.upload-input').forEach(input => {
            input.addEventListener('change', function(event) {
                const file = event.target.files[0];
                if (file) {
                    const preview = this.closest('.file-upload').querySelector('.upload-preview img');
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        preview.src = e.target.result;
                    };
                    
                    reader.readAsDataURL(file);
                }
            });
        });
        
        // 专题指引文字字符计数
        const topicGuide = document.getElementById('topicGuide');
        const guideCharCount = document.getElementById('guideCharCount');
        
        if (topicGuide) {
            topicGuide.addEventListener('input', function() {
                const count = this.value.length;
                guideCharCount.textContent = count;
                
                // 超过字数限制时添加红色提示
                if (count > 300) {
                    guideCharCount.classList.add('text-red-500');
                } else {
                    guideCharCount.classList.remove('text-red-500');
                }
            });
        }
        
        // AI助手搜索功能
        const aiAssistantSearch = document.getElementById('aiAssistantSearch');
        const searchAiBtn = document.getElementById('searchAiBtn');
        
        searchAiBtn.addEventListener('click', function() {
            const searchText = aiAssistantSearch.value.toLowerCase();
            const aiOptions = document.querySelectorAll('input[name="aiAssistant"]');
            
            aiOptions.forEach(option => {
                const label = option.nextElementSibling.textContent.toLowerCase();
                const parentDiv = option.closest('div');
                
                if (searchText === '' || label.includes(searchText)) {
                    parentDiv.style.display = '';
                } else {
                    parentDiv.style.display = 'none';
                }
            });
        });
        
        // 侧边栏面板控制
        const sidePanel = document.getElementById('sidePanel');
        const sidePanelTitle = document.getElementById('sidePanelTitle');
        const addTopicBtn = document.getElementById('addTopicBtn');
        const closeSidePanelBtn = document.getElementById('closeSidePanel');
        const cancelTopicBtn = document.getElementById('cancelTopicBtn');
        const topicForm = document.getElementById('topicForm');
        
        // 打开侧边栏面板（新增专题）
        addTopicBtn.addEventListener('click', function() {
            console.log('点击新增专题');
            sidePanelTitle.textContent = '新增专题';
            // 清除所有编辑按钮的编辑状态
            document.querySelectorAll('.edit-btn.editing').forEach(editBtn => {
                editBtn.classList.remove('editing');
            });
            // 重置当前编辑行ID
            currentEditRowId = null;
            resetForm();
            openSidePanelFunc();
        });
        
        // 编辑按钮点击事件
        document.querySelectorAll('.edit-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                console.log('点击编辑专题');
                // 清除所有编辑按钮的编辑状态
                document.querySelectorAll('.edit-btn.editing').forEach(editBtn => {
                    editBtn.classList.remove('editing');
                });
                // 标记当前编辑按钮
                this.classList.add('editing');
                sidePanelTitle.textContent = '编辑专题';
                
                // 获取当前行数据（实际应用中会从后端获取）
                const row = this.closest('tr');
                currentEditRowId = row.getAttribute('data-id') || row.rowIndex; // 记录当前编辑行ID
                
                const topicName = row.cells[1].textContent;
                const pcIconSrc = row.querySelector('td:nth-child(3) img').src;
                const miniIconSrc = row.querySelector('td:nth-child(4) img').src;
                
                // 获取分类和排序值
                const category = row.cells[4].textContent.trim();
                const sortValue = row.cells[5].textContent.trim();
                
                const isRecommended = row.cells[6].textContent.trim() === '推荐';
                const isOnline = row.cells[7].textContent.trim() === '上线';
                
                // 填充表单数据（示例数据，实际应从API获取完整数据）
                fillFormData({
                    topicName,
                    pcIconSrc,
                    miniIconSrc,
                    category,
                    sortValue,
                    isRecommended,
                    isOnline,
                    pageStyle: topicPageStyles[topicName] || '宣传活动', // 从示例数据获取
                    topicGuide: '这是示例的专题指引文字，实际应从API获取。', // 示例数据
                    presetPrompt: '这是示例的专题主页预置提示词，实际应从API获取。', // 示例数据
                    aiAssistant: '社区服务智能助理', // 示例数据
                    workflowGuidePc: '这是示例的PC端工作流程指引HTML代码，实际应从API获取。', // 示例数据
                    workflowGuideMini: '这是示例的小程序端工作流程指引HTML代码，实际应从API获取。' // 示例数据
                });
                
                openSidePanelFunc();
            });
        });
        
        // 关闭侧边栏面板事件监听
        closeSidePanelBtn.addEventListener('click', function() {
            console.log('点击关闭按钮');
            closeSidePanelFunc();
        });
        
        cancelTopicBtn.addEventListener('click', function() {
            console.log('点击取消按钮');
            closeSidePanelFunc();
        });
        
        // 打开侧边栏面板
        function openSidePanelFunc() {
            console.log('执行打开侧边栏');
            // 确保侧边栏初始状态
            sidePanel.classList.add('active');
            sidePanel.style.removeProperty('width');
            sidePanel.style.width = '600px';
            sidePanel.style.right = '0';
        }
        
        // 关闭侧边栏面板
        function closeSidePanelFunc() {
            console.log('执行关闭侧边栏');
            sidePanel.classList.remove('active');
            sidePanel.style.width = '0';
        }
        
        // 重置表单
        function resetForm() {
            topicForm.reset();
            document.getElementById('pcIconPreview').src = '';
            document.getElementById('miniIconPreview').src = '';
            document.getElementById('guideCharCount').textContent = '0';
        }
        
        // 填充表单数据
        function fillFormData(data) {
            document.getElementById('topicName').value = data.topicName;
            document.getElementById('pcIconPreview').src = data.pcIconSrc;
            document.getElementById('miniIconPreview').src = data.miniIconSrc;
            document.getElementById('isRecommended').checked = data.isRecommended;
            document.getElementById('isOnline').checked = data.isOnline;
            
            // 设置页面样式
            if (data.pageStyle) {
                const pageStyleSelect = document.getElementById('pageStyle');
                pageStyleSelect.value = data.pageStyle;
                
                // 触发change事件，以便显示/隐藏对应配置项
                const event = new Event('change');
                pageStyleSelect.dispatchEvent(event);
            }
            
            // 设置专题指引文字
            if (data.topicGuide) {
                const guideElement = document.getElementById('topicGuide');
                guideElement.value = data.topicGuide;
                document.getElementById('guideCharCount').textContent = data.topicGuide.length;
            }
            
            // 设置预置提示词
            if (data.presetPrompt) {
                document.getElementById('presetPrompt').value = data.presetPrompt;
            }
            
            // 设置工作流程指引
            if (data.workflowGuidePc) {
                document.getElementById('workflowGuidePc').value = data.workflowGuidePc;
            }
            
            if (data.workflowGuideMini) {
                document.getElementById('workflowGuideMini').value = data.workflowGuideMini;
            }
            
            // 设置分类单选项
            if (data.category) {
                const radioBtn = document.querySelector(`input[name="actionCategory"][value="${data.category}"]`);
                if (radioBtn) {
                    radioBtn.checked = true;
                }
            }
            
            // 设置排序值
            if (data.sortValue) {
                document.getElementById('sortValue').value = data.sortValue;
            }
            
            // 设置AI助手智能体
            if (data.aiAssistant) {
                const aiRadioBtn = document.querySelector(`input[name="aiAssistant"][value="${data.aiAssistant}"]`);
                if (aiRadioBtn) {
                    aiRadioBtn.checked = true;
                }
            }
        }
        
        // 保存按钮点击事件
        document.getElementById('saveTopicBtn').addEventListener('click', function() {
            // 收集表单数据
            const topicName = document.getElementById('topicName').value;
            const isRecommended = document.getElementById('isRecommended').checked;
            const isNewOnline = document.getElementById('isNewOnline').checked;
            const isOnline = document.getElementById('isOnline').checked;
            const pageStyle = document.getElementById('pageStyle').value;
            const topicGuide = document.getElementById('topicGuide').value;
            const presetPrompt = document.getElementById('presetPrompt').value;
            const workflowGuidePc = document.getElementById('workflowGuidePc').value;
            const workflowGuideMini = document.getElementById('workflowGuideMini').value;
            const sortValue = document.getElementById('sortValue').value;
            
            // 获取选中的分类
            let selectedCategory = '';
            document.querySelectorAll('input[name="actionCategory"]').forEach(radio => {
                if (radio.checked) {
                    selectedCategory = radio.value;
                }
            });
            
            // 获取选中的AI助手
            let selectedAI = '';
            document.querySelectorAll('input[name="aiAssistant"]').forEach(radio => {
                if (radio.checked) {
                    selectedAI = radio.value;
                }
            });
            
            // 验证必填字段
            if (!topicName || !pageStyle || !selectedCategory || !selectedAI) {
                alert('请填写必填字段：专题名称、页面样式、分类和AI助手智能体');
                return;
            }
            
            // 验证同一分类下排序值不重复
            if (!validateSortValue(selectedCategory, sortValue)) {
                alert('同一分类下排序值不能重复，请修改排序值');
                return;
            }
            
            // 实际应用中这里会向后端发送请求
            // 模拟保存成功，更新当前编辑的行
            if (sidePanelTitle.textContent === '编辑专题') {
                // 找到当前编辑的行
                const editingRow = document.querySelector('.edit-btn.editing');
                if (editingRow) {
                    const row = editingRow.closest('tr');
                    // 更新行内容
                    row.cells[1].textContent = topicName;
                    row.cells[4].textContent = selectedCategory;
                    row.cells[5].textContent = sortValue;
                    row.cells[6].innerHTML = isRecommended 
                        ? '<span class="status-badge status-online">推荐</span>' 
                        : '<!-- 未推荐不显示 -->';
                    row.cells[7].innerHTML = isNewOnline 
                        ? '<span class="status-badge status-new">新上线</span>' 
                        : '<!-- 非新上线不显示 -->';
                    row.cells[8].innerHTML = isOnline 
                        ? '<span class="status-badge status-online">上线</span>' 
                        : '<span class="status-badge status-offline">未上线</span>';
                    
                    // 清除编辑状态
                    editingRow.classList.remove('editing');
                }
            }
            
            alert('保存成功！');
            closeSidePanelFunc();
        });
        
        // 分类筛选功能
        document.getElementById('actionCategoryFilter').addEventListener('change', filterTopics);
        document.getElementById('pageStyleFilter').addEventListener('change', filterTopics);
        document.getElementById('isOnlineFilter').addEventListener('change', filterTopics);
        document.getElementById('isRecommendedFilter').addEventListener('change', filterTopics);
        document.getElementById('isNewOnlineFilter').addEventListener('change', filterTopics);
        document.getElementById('sortTypeFilter').addEventListener('change', sortTopics);
        
        // 添加示例修改时间数据，实际应从后端获取
        const topicUpdateTimes = {
            '社区文体活动': '2025-06-15 14:30',
            '垃圾分类专题': '2025-06-14 09:15',
            '矛盾调解专题': '2025-06-13 16:25',
            '防疫专题': '2025-06-12 11:40',
            '困难群众救助': '2025-06-11 15:20',
            '特殊人群关怀': '2025-06-10 09:30',
            '人口普查专题': '2025-06-09 13:45',
            '社区安全巡查': '2025-06-08 16:10',
            '教育帮扶计划': '2025-06-07 10:05',
            '环境治理专题': '2025-06-06 14:55'
        };

        // 添加示例页面样式数据，实际应从后端获取
        const topicPageStyles = {
            '社区文体活动': '宣传活动',
            '垃圾分类专题': '宣传活动',
            '矛盾调解专题': '巡查走访',
            '防疫专题': '宣传活动',
            '困难群众救助': '巡查走访',
            '特殊人群关怀': '巡查走访',
            '人口普查专题': '工作总结',
            '社区安全巡查': '巡查走访',
            '教育帮扶计划': '宣传活动',
            '环境治理专题': '巡查走访'
        };
        
        // 当前编辑行ID，用于排序值验证
        let currentEditRowId = null;
        
        function filterTopics() {
            const actionFilter = document.getElementById('actionCategoryFilter').value;
            const pageStyleFilter = document.getElementById('pageStyleFilter').value;
            const isOnlineFilter = document.getElementById('isOnlineFilter').value;
            const isRecommendedFilter = document.getElementById('isRecommendedFilter').value;
            const isNewOnlineFilter = document.getElementById('isNewOnlineFilter').value;
            
            document.querySelectorAll('.admin-table tbody tr').forEach(row => {
                const actionCategory = row.cells[4].textContent;
                const pageStyle = row.cells[5].textContent;
                const isRecommended = row.cells[6].textContent.includes('推荐');
                const isNewOnline = row.cells[7].textContent.includes('新上线');
                const isOnline = row.cells[8].textContent.includes('上线');
                
                const actionMatch = !actionFilter || actionCategory.includes(actionFilter);
                const pageStyleMatch = !pageStyleFilter || pageStyle === pageStyleFilter;
                const onlineMatch = !isOnlineFilter || (isOnlineFilter === '上线' && isOnline);
                const recommendedMatch = !isRecommendedFilter || (isRecommendedFilter === '推荐' && isRecommended);
                const newOnlineMatch = !isNewOnlineFilter || 
                    (isNewOnlineFilter === '是' && isNewOnline) || 
                    (isNewOnlineFilter === '否' && !isNewOnline);
                
                if (actionMatch && pageStyleMatch && onlineMatch && recommendedMatch && newOnlineMatch) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        function sortTopics() {
            const sortType = document.getElementById('sortTypeFilter').value;
            const tableBody = document.querySelector('.admin-table tbody');
            const rows = Array.from(tableBody.querySelectorAll('tr'));
            
            rows.sort((a, b) => {
                const aName = a.cells[1].textContent.trim();
                const bName = b.cells[1].textContent.trim();
                
                if (sortType === 'updateTime') {
                    // 按修改时间排序（降序）
                    const aDate = new Date(topicUpdateTimes[aName] || '2000-01-01');
                    const bDate = new Date(topicUpdateTimes[bName] || '2000-01-01');
                    return bDate - aDate;
                } else {
                    // 按排序数字排序（降序）
                    const aSort = parseInt(a.cells[5].textContent.trim()) || 0;
                    const bSort = parseInt(b.cells[5].textContent.trim()) || 0;
                    return bSort - aSort;
                }
            });
            
            // 重新插入排序后的行
            rows.forEach(row => {
                tableBody.appendChild(row);
            });
            
            // 重新编号
            rows.forEach((row, index) => {
                row.cells[0].textContent = index + 1;
            });
        }
        
        // 确保同一分类下的排序值不重复
        function validateSortValue(category, value) {
            let isDuplicate = false;
            const tableRows = document.querySelectorAll('.admin-table tbody tr');
            
            tableRows.forEach(row => {
                const rowCategory = row.cells[4].textContent.trim();
                const rowSortValue = parseInt(row.cells[5].textContent.trim());
                const rowId = row.getAttribute('data-id') || row.rowIndex; // 使用行索引作为ID
                
                // 如果是同一分类且不是当前编辑的行，检查排序值是否重复
                if (rowCategory === category && rowId !== currentEditRowId && rowSortValue === parseInt(value)) {
                    isDuplicate = true;
                }
            });
            
            return !isDuplicate;
        }
        
        // 页面加载完成后初始化侧边栏
        document.addEventListener('DOMContentLoaded', function() {
            console.log('页面加载完成，初始化设置');

            // 打印关键DOM元素，确保它们存在
            console.log('侧边栏面板元素:', sidePanel);
            console.log('添加按钮元素:', addTopicBtn);
            console.log('关闭按钮元素:', closeSidePanelBtn);
            
            // 为新增按钮再添加一个点击事件，确保能捕获
            addTopicBtn.onclick = function() {
                console.log('点击新增专题（onclick）');
                openSidePanelFunc();
            };
            
            // 为所有编辑按钮添加onclick事件
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.onclick = function() {
                    console.log('点击编辑按钮（onclick）');
                    openSidePanelFunc();
                };
            });
            
            // 页面样式选择变化时显示/隐藏对应的配置项
            const pageStyleSelect = document.getElementById('pageStyle');
            
            // 添加页面样式变化事件监听器
            pageStyleSelect.addEventListener('change', function() {
                const selectedStyle = this.value;
                const presetPromptSection = document.getElementById('presetPromptSection');
                
                // 只有选择"工作总结"时才显示预置提示词输入框
                if (selectedStyle === '工作总结') {
                    presetPromptSection.style.display = 'block';
                } else {
                    presetPromptSection.style.display = 'none';
                }
            });
            
            // 绑定PC图标上传事件
            document.getElementById('pcIconUpload').addEventListener('click', function() {
                document.getElementById('pcIconInput').click();
            });

            document.getElementById('pcIconInput').addEventListener('change', function() {
                handleImageUpload('pcIconInput', 'pcIconPreview');
            });

            // 绑定小程序图标上传事件
            document.getElementById('miniIconUpload').addEventListener('click', function() {
                document.getElementById('miniIconInput').click();
            });

            document.getElementById('miniIconInput').addEventListener('change', function() {
                handleImageUpload('miniIconInput', 'miniIconPreview');
            });

            // 初始化分页功能
            initPagination();
        });
        
        // 处理图片上传预览
        function handleImageUpload(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    preview.src = e.target.result;
                };
                
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        // 分页相关功能
        function initPagination() {
            const pageSizeSelector = document.getElementById('pageSizeSelector');
            const paginationItems = document.querySelectorAll('.pagination-item');
            const tableRows = document.querySelectorAll('.admin-table tbody tr');
            const jumpPageInput = document.getElementById('pageJumpInput');
            const jumpPageButton = document.getElementById('pageJumpBtn');
            const totalPagesElem = document.querySelector('.pagination-info .font-medium').nextElementSibling;
            
            // 当前页码和每页显示条数
            let currentPage = 1;
            let pageSize = parseInt(pageSizeSelector.value);
            
            // 计算总页数
            function calculateTotalPages() {
                return Math.ceil(tableRows.length / pageSize);
            }
            
            // 更新分页显示
            function updatePagination() {
                const totalPages = calculateTotalPages();
                
                // 更新总页数显示
                totalPagesElem.textContent = totalPages;
                
                // 更新页码显示
                let startPage = Math.max(1, currentPage - 2);
                let endPage = Math.min(totalPages, startPage + 4);
                
                if (endPage - startPage < 4 && totalPages > 4) {
                    startPage = Math.max(1, endPage - 4);
                }
                
                // 移除所有页码按钮，只保留首尾导航按钮
                const paginationContainer = document.querySelector('.pagination');
                const firstPageBtn = paginationContainer.firstElementChild;  // 第一页按钮
                const prevPageBtn = firstPageBtn.nextElementSibling;  // 上一页按钮
                const nextPageBtn = paginationContainer.lastElementChild.previousElementSibling;  // 下一页按钮
                const lastPageBtn = paginationContainer.lastElementChild;  // 最后一页按钮
                
                // 清除现有页码按钮
                while (paginationContainer.childElementCount > 4) {
                    if (paginationContainer.childNodes[2] !== nextPageBtn) {
                        paginationContainer.removeChild(paginationContainer.childNodes[2]);
                    }
                }
                
                // 添加新的页码按钮
                for (let i = endPage; i >= startPage; i--) {
                    const pageItem = document.createElement('div');
                    pageItem.className = 'pagination-item';
                    if (i === currentPage) {
                        pageItem.classList.add('active');
                    }
                    pageItem.textContent = i;
                    pageItem.addEventListener('click', function() {
                        goToPage(i);
                    });
                    
                    // 插入到"下一页"按钮之前
                    paginationContainer.insertBefore(pageItem, nextPageBtn);
                }
                
                // 更新首尾页和上下页按钮状态
                firstPageBtn.classList.toggle('disabled', currentPage === 1);
                prevPageBtn.classList.toggle('disabled', currentPage === 1);
                nextPageBtn.classList.toggle('disabled', currentPage === totalPages);
                lastPageBtn.classList.toggle('disabled', currentPage === totalPages);
                
                // 更新最大页码输入限制和显示
                jumpPageInput.max = totalPages;
                document.querySelector('.page-jump-container .text-gray-500').textContent = `/ ${totalPages}`;
                
                // 更新显示的行
                updateTableRows();
            }
            
            // 更新表格显示的行
            function updateTableRows() {
                const startIndex = (currentPage - 1) * pageSize;
                const endIndex = startIndex + pageSize;
                
                tableRows.forEach((row, index) => {
                    if (index >= startIndex && index < endIndex) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            }
            
            // 跳转到指定页
            function goToPage(page) {
                currentPage = page;
                updatePagination();
            }
            
            // 注册事件：每页显示条数变化
            pageSizeSelector.addEventListener('change', function() {
                pageSize = parseInt(this.value);
                currentPage = 1; // 重置到第一页
                updatePagination();
            });
            
            // 注册事件：首页按钮
            paginationItems[0].addEventListener('click', function() {
                if (!this.classList.contains('disabled') && currentPage !== 1) {
                    goToPage(1);
                }
            });
            
            // 注册事件：上一页按钮
            paginationItems[1].addEventListener('click', function() {
                if (!this.classList.contains('disabled') && currentPage > 1) {
                    goToPage(currentPage - 1);
                }
            });
            
            // 注册事件：页码按钮（已在updatePagination中处理）
            
            // 注册事件：下一页按钮
            paginationItems[paginationItems.length - 2].addEventListener('click', function() {
                const totalPages = calculateTotalPages();
                if (!this.classList.contains('disabled') && currentPage < totalPages) {
                    goToPage(currentPage + 1);
                }
            });
            
            // 注册事件：末页按钮
            paginationItems[paginationItems.length - 1].addEventListener('click', function() {
                const totalPages = calculateTotalPages();
                if (!this.classList.contains('disabled') && currentPage !== totalPages) {
                    goToPage(totalPages);
                }
            });
            
            // 注册事件：跳转到指定页
            jumpPageButton.addEventListener('click', function() {
                const pageNum = parseInt(jumpPageInput.value);
                const totalPages = calculateTotalPages();
                if (pageNum >= 1 && pageNum <= totalPages) {
                    goToPage(pageNum);
                } else {
                    // 输入有误，重置为当前页
                    jumpPageInput.value = currentPage;
                }
            });
            
            // 回车键也可触发跳页
            jumpPageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    jumpPageButton.click();
                }
            });
            
            // 初始化分页显示
            updatePagination();
        }

        // 打开页面按钮点击事件
        document.querySelectorAll('.open-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                console.log('点击打开页面');
                
                // 获取当前行数据
                const row = this.closest('tr');
                const category = row.cells[4].textContent.trim(); // 获取分类
                
                // 根据分类决定跳转到哪个专题详情页面
                let targetPage = '';
                switch(category) {
                    case '宣传活动':
                        targetPage = 'topic_detail_template_huodong.html';
                        break;
                    case '巡查走访':
                        targetPage = 'topic_detail_template_wentishangbao_houxu.html';
                        break;
                    case '工作总结':
                        targetPage = 'topic_detail_template_gongzuozongjie.html';
                        break;
                    default:
                        // 默认跳转到活动专题页面
                        targetPage = 'topic_detail_template_huodong.html';
                        break;
                }
                
                // 在新窗口中打开对应的专题详情页面
                window.open(targetPage, '_blank');
            });
        });
    </script>
</body>
</html> 